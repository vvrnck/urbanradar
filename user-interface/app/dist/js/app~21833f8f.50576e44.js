(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~21833f8f"],{"0692":function(e,t,a){"use strict";var s=a("2b0e"),o=a("a925"),i=a("190d"),r=a("430e");const n="pt",l={en:i,pt:r};s["default"].use(o["a"]);const c=Object.assign({},l);var d=new o["a"]({locale:n,fallbackLocale:"en",messages:c});window.i18n=d;t["a"]=d},"0d18":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("v-dialog",{staticClass:"dialog-timeline",attrs:{width:"720",scrollable:""},on:{"click:outside":function(t){return e.closeTimeline()}},model:{value:e.timeline,callback:function(t){e.timeline=t},expression:"timeline"}},[t("v-card",{staticClass:"timeline-wrapper",attrs:{shaped:"",outlined:""}},[t("v-toolbar",{attrs:{color:"teal"}},[t("div",{staticClass:"headline"},[e._v(e._s(e.$t("timeline")))]),t("v-spacer"),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.closeTimeline()}}},[t("v-icon",[e._v("mdi-close")])],1)],1),e.loading?t("Loading",{attrs:{color:"primary",type:"linear"}}):e._e(),t("v-divider"),e.loading?t("div",{staticClass:"timeline-loader"},[t("v-progress-circular",{staticClass:"mx-auto ma-5 justify-center align-center",attrs:{indeterminate:"",color:"teal",size:50,width:"5"}})],1):e._e(),e.loading||e.items.length?e._e():t("div",{staticClass:"timeline-loader"},[t("h4",[e._v(e._s(e.$t("no_data")))])]),!e.loading&&e.items.length?t("div",{staticClass:"timeline"},[t("v-timeline",{attrs:{"align-top":"",dense:""}},e._l(e.items,(function(a,s){return t("v-timeline-item",{key:s,attrs:{icon:"CREATE"===a.action?"mdi-plus":"mdi-pencil",color:e.getColor(a.action),"fill-dot":""}},[t("v-row",{staticClass:"pt-1"},[t("v-col",{attrs:{cols:"3"}},[t("strong",[e._v(e._s(e.formatDate(a.creation_date)))])]),t("v-col",{attrs:{cols:"7"}},[t("strong",[e._v(e._s(e.$t(e.getAction(a.action))))]),t("div",{staticClass:"text-caption"},[e._v(" "+e._s(a.user_name)+" ")])]),a.data.length?t("v-col",{attrs:{cols:"2"}},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.openInfo(a)}}},[t("v-icon",[e._v("mdi-eye")])],1)],1):e._e()],1)],1)})),1)],1):e._e()],1)],1),e.info.open?t("v-dialog",{staticStyle:{"overflow-x":"hidden"},attrs:{width:"1000","content-class":"dialog-timeline-info"},on:{"click:outside":function(t){return e.closeInfo()}},model:{value:e.info.open,callback:function(t){e.$set(e.info,"open",t)},expression:"info.open"}},[t("v-card",{staticClass:"card-info",attrs:{outlined:""}},[t("v-toolbar",{attrs:{color:"teal"}},[t("div",{staticClass:"headline"},[e._v(e._s(e.$t("fields")))]),t("v-spacer"),t("v-btn",{attrs:{icon:""},on:{click:function(t){e.info=!1}}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("div",{staticClass:"field-header"},[t("div",{staticClass:"header-old-value"},[e._v(e._s(e.$t("old_value")))]),t("div",{staticClass:"header-new-value"},[e._v(e._s(e.$t("new_value")))])]),e._l(e.info.data,(function(a,s){return t("div",{key:s,staticClass:"ma-5"},[t("div",{staticClass:"data-item"},[t("div",{staticClass:"attribute"},[e._v(" "+e._s(a.attribute)+": ")]),t("v-card",{staticClass:"changes pa-1",attrs:{outlined:"",tile:"",elevation:"10"}},[t("div",{staticClass:"old-value"},[e._v(" "+e._s(a.old_value)+" ")]),t("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-right-bold-circle-outline")]),t("div",{staticClass:"new-value"},[e._v(" "+e._s(a.new_value)+" ")])],1)],1)])}))],2)],1):e._e()],1)},o=[],i=a("c1df"),r=a.n(i),n=a("bc3a"),l=a.n(n),c=a("ed08"),d=a("2ef0"),p=a("c154"),u={name:"Timeline",components:{Loading:p["a"]},props:["closeTimeline","timeline"],data(){return{loading:!0,items:[],info:{open:!1,data:[]}}},mounted(){const e=document.querySelector(".timeline-wrapper");e&&e.parentNode.parentNode.style.setProperty("z-index","999999","important");const t=Object.assign({},this.$store.getters.drawDialog),{feature:a}=t;let s=Object(c["b"])("audit/"+a.id,{type:"Feature"});l.a.get(s).then(e=>{const{data:t,errors:a}=e.data;if(!Object(d["isEmpty"])(a))return this.loading=!1,Object(c["g"])(a);this.items=t,this.loading=!1}).catch(e=>{console.log(e);const t={open:!0,color:"",text:"error_get_timeline",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1})},methods:{closeInfo(){this.info={open:!1,data:[]}},openInfo(e){this.info={open:!0,data:e.data},setTimeout(()=>{const e=document.querySelector(".dialog-timeline-info");e&&e.parentNode.style.setProperty("z-index","99999999","important")},100)},getColor(e){return"CREATE"===e?"primary":"secondary"},formatDate(e){const t=this.$i18n.locale;return["pt"].includes(t)?r()(e).format("DD/MM/YYYY hh:mm:ss"):r()(e).format("MM-DD-YYYY hh:mm:ss")},getAction(e){return"CREATE"===e?"object_create":"object_edit"}}},m=u,h=(a("bf88"),a("2877")),g=Object(h["a"])(m,s,o,!1,null,null,null);t["a"]=g.exports},1011:function(e,t,a){"use strict";a("3a6c6")},1795:function(e,t,a){},1808:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isMobile?t("div",{staticClass:"nav"},[t("v-app-bar",{attrs:{app:"",height:"56px"}},[t("v-app-bar-nav-icon",{directives:[{name:"show",rawName:"v-show",value:e.hasMenu,expression:"hasMenu"}],on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),t("v-toolbar-title",[t("div",{staticClass:"navbar-toolbar-mobile"},[t("img",{attrs:{src:a("f66a"),width:"40px"}}),t("div",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$t(e.title)))]),t("v-menu",{staticClass:"global-overlap-index",attrs:{right:"",bottom:"","close-on-click":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),a),[t("v-icon",[e._v("mdi-menu-down")])],1)]}}],null,!1,42258601)},[t("v-list",e._l(e.items,(function(a){return t("v-list-item",{key:a.label,on:{click:()=>{}}},[t("v-list-item-title",{on:{click:function(t){return e.goToPage(a)}}},[e._v(e._s(e.$t(a.name)))])],1)})),1)],1)],1)]),t("v-spacer"),t("div",{staticClass:"navbar-email"},[t("v-icon",[e._v("mdi-account-circle")])],1),t("v-menu",{staticClass:"global-overlap-index",attrs:{left:"",bottom:""},on:{"click:outside":()=>{}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),a),[t("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,3221905750)},[t("v-list",e._l(e.options,(function(a){return t("v-list-item",{key:a.label,on:{click:()=>{}}},[t("v-list-item-title",[e._v(e._s(a.label))])],1)})),1)],1)],1),t("v-navigation-drawer",{staticClass:"global-overlap-index mobile-drawer",attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t("v-list-item",[t("v-list-item-avatar",[t("v-avatar",{staticClass:"black--text",attrs:{color:"#52FFEE"}},[e._v(" "+e._s(e.getUser().email.split("")[0].toUpperCase())+" ")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(e.getUser().email))])],1),t("v-btn",{attrs:{icon:"",fab:"",small:""},on:{click:function(t){return e.closeDrawer()}}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-divider"),t("v-list",{attrs:{dense:""}},[e._l(e.sectionItems,(function(a){return t("v-list-item",{key:a.id,attrs:{link:""},on:{click:function(t){return e.openLayerOptions(a)}}},[t("v-list-item-icon",[t("v-icon",{attrs:{color:"#52FFEE"}},[e._v(e._s(a.icon))])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(e.getLabel(a,e.$i18n.locale)))])],1)],1)})),t("v-divider"),t("v-list-item",{attrs:{link:""},on:{click:function(t){return e.logout()}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-keyboard-return")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v("Sair")])],1)],1)],2),t("LayerMenu",{attrs:{layer:e.layerOptions,close:()=>e.closeLayerOptions()}}),t("div",{staticClass:"drawer-actions-wrapper"},[t("div",{staticClass:"drawer-actions-buttons"},[t("v-btn",{attrs:{rounded:"",dark:"",color:"#F44E3B","min-width":"105",ripple:""},on:{click:function(t){return e.resetMapConfigs()}}},[e._v(" "+e._s(e.$t("btn_reset"))+" ")]),t("v-btn",{attrs:{rounded:"",dark:"",color:"#6DC1B2","min-width":"105",ripple:""},on:{click:function(t){return e.getFeatures()}}},[e._v(" "+e._s(e.$t("btn_apply"))+" ")])],1)])],1)],1):e._e(),e.isMobile?e._e():t("div",{staticClass:"nav"},[t("v-navigation-drawer",{staticStyle:{transition:"all 0.7s ease-in-out 0s"},attrs:{"mini-variant":"",permanent:"","data-v-step":"navbar"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t("v-list-item",{staticClass:"px-2"},[t("v-list-item-avatar",[t("v-avatar",{staticClass:"black--text",attrs:{color:"#52FFEE"}},[e._v(" "+e._s(e.getUser().email.split("")[0].toUpperCase())+" ")])],1),t("v-list-item-title",[e._v(e._s(e.getUser().email))]),t("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[t("v-icon",[e._v("mdi-chevron-left")])],1)],1),t("v-divider"),t("v-list",{attrs:{dense:""}},[e._l(e.items,(function(a){return t("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.hasScopes(a.scopes),expression:"hasScopes(item.scopes)"}],key:a.name,attrs:{link:"","data-v-step":"navbar-item-"+a.name},on:{click:function(t){return e.goToPage(a)}}},[t("v-list-item-icon",[t("v-tooltip",{staticStyle:{"z-index":"9999"},attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:o}){return[t("v-icon",e._g(e._b({},"v-icon",o,!1),s),[e._v(" "+e._s(a.icon)+" ")])]}}],null,!0)},[t("span",[e._v(" "+e._s(e.$t(a.name))+" ")])])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(e.$t(a.name)))])],1)],1)})),t("v-divider"),t("v-list-item",{attrs:{link:"","data-v-step":"navbar-item-logout"},on:{click:function(t){return e.logout()}}},[t("v-tooltip",{staticStyle:{"z-index":"9999"},attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-icon",e._g(e._b({},"v-icon",s,!1),a),[e._v(" mdi-logout ")])]}}],null,!1,3024300024)},[t("span",[e._v(" "+e._s(e.$t("logout"))+" ")])]),t("v-list-item-content",[t("v-list-item-title",[e._v("Logout")])],1)],1),t("v-divider")],2),t("v-list",{staticStyle:{position:"fixed",bottom:"0",width:"100%"},attrs:{dense:""}},[t("v-menu",{attrs:{"offset-x":"","z-index":"9999"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-list-item",e._g(e._b({attrs:{link:"","data-v-step":"navbar-item-language"}},"v-list-item",s,!1),a),[t("v-tooltip",{staticStyle:{"z-index":"9999"},attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-icon",e._g(e._b({},"v-icon",s,!1),a),[e._v(" mdi-translate ")])]}}],null,!0)},[t("span",[e._v(" "+e._s(e.$t("change_language"))+" ")])]),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(e.$t("change_language")))])],1)],1)]}}],null,!1,3824330789)},[t("v-list",{attrs:{dense:""}},e._l(e.languages,(function(a,s){return t("v-list-item",{key:s,attrs:{link:""}},[t("v-list-item-content",{on:{click:function(t){return e.changeLanguage(a.language)}}},[t("v-list-item-title",[e._v(e._s(a.name))])],1)],1)})),1)],1),t("v-list-item",{attrs:{link:"","data-v-step":"navbar-item-theme"},on:{click:function(t){return e.changeTheme()}}},[t("v-list-item-icon",[t("v-tooltip",{staticStyle:{"z-index":"9999"},attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-icon",e._g(e._b({},"v-icon",s,!1),a),[e._v(" mdi-theme-light-dark ")])]}}],null,!1,369674305)},[t("span",[e._v(" "+e._s(e.$t("change_theme"))+" ")])])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(e.$t("change_theme")))])],1)],1),t("v-list-item",{attrs:{link:"","data-v-step":"navbar-item-tour"},on:{click:function(t){return e.startTour()}}},[t("v-list-item-icon",[t("v-tooltip",{staticStyle:{"z-index":"9990"},attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-icon",e._g(e._b({},"v-icon",s,!1),a),[e._v(" mdi-earth ")])]}}],null,!1,581706072)},[t("span",[e._v(" "+e._s(e.$t("tour"))+" ")])])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(e.$t("change_theme")))])],1)],1),t("v-list-item",[t("v-list-item-content",[t("div",{staticClass:"logo-wrapper"},[t("img",{staticClass:"logo",attrs:{src:a("cf4d")}})])])],1)],1)],1)],1)])},o=[],i=(a("14d9"),a("2ef0")),r=a("ed08"),n=a("e8c3"),l={name:"Navbar",props:["hasMenu","title"],components:{LayerMenu:n["a"]},data(){return{drawer:!1,isMobile:!0,items:[{icon:"mdi-map",name:"map",label:"Map",scopes:["map.view"],route:"map"},{icon:"mdi-account-multiple",name:"management",label:"Management",scopes:["management.view"],route:"management"},{icon:"mdi-cog",name:"admin",label:"Admin",scopes:["administration.view"],route:"admin"}],options:[{icon:"mdi-home",label:"Users",scopes:[""]},{icon:"mdi-home",label:"Feedbacks List",scopes:[""]},{icon:"mdi-home",label:"Exit",scopes:[""]}],languages:[{icon:"",name:"English",label:"",language:"en"},{icon:"",name:"Português",label:"",language:"pt"}],layerOptions:{show:!1,sectionName:null,options:[]},availableDates:null,selectedItem:0,mini:!0}},created(){window.addEventListener("resize",this.resizeWindow)},destroyed(){window.removeEventListener("resize",this.resizeWindow)},mounted(){this.resizeWindow()},methods:{goToPage(e){this.$router.push(e.route).catch(e=>console.warn(e))},getLabel(e,t){return Object(r["k"])(e,t)},hasScopes(e){if(Object(i["isEmpty"])(e))return!0;let t=!1;return this.getUserScopes().map(a=>{e.includes(a)&&(t=!0)}),t},getUserScopes(){return Object(r["r"])()},startTour(){this.$tours["tour"].start()},resetMapConfigs(){this.reset().then(()=>{const e=JSON.parse(localStorage.getItem("initialMenuData"));this.$store.dispatch("updateMenu",e),this.layerOptions={show:!1,sectionName:null,options:[]}})},getFeatures(){const{loadFeatures:e}=window._mapFunctions;e().then(()=>{this.drawer=!1,this.$store.dispatch("updateLegend",!0)})},closeDrawer(){this.drawer=!1},openLayerOptions(e){this.layerOptions={show:!0,name:Object(r["k"])(e,this.$i18n.locale),options:e.layers}},closeLayerOptions(){this.layerOptions.show=!1,this.selectedItem=0},getUser(){return Object(r["p"])()},changeTheme(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,document.documentElement.style.setProperty("--darkcolor",""+(this.$vuetify.theme.isDark?"#2e322f":"#FFF")),document.documentElement.style.setProperty("--whitecolor",""+(this.$vuetify.theme.isDark?"#FFF":"#2e322f"))},changeLanguage(e){this.$i18n.locale=e;const t=document.getElementsByClassName("leaflet-control-layers-selector");for(let a=0;a<t.length;a++){let e=t[a].nextSibling;const s=this.getLayerControlNames(e.innerHTML.trim());e.innerHTML=s}},getLayerControlNames(e){return["Detailed","Detalhado"].includes(e)?"en"===this.$i18n.locale?" Detailed":" Detalhado":["Dark","Escuro"].includes(e)?"en"===this.$i18n.locale?" Dark":" Escuro":void 0},logout(){Object(r["a"])(),this.$router.push("/login").catch(e=>console.warn(e))},resizeWindow(){window.innerWidth<=768?this.isMobile=!0:this.isMobile=!1}},computed:{menuItems(){return this.$store.getters.menu},sectionItems(){return this.$store.getters.layers}}},c=l,d=(a("1011"),a("2877")),p=Object(d["a"])(c,s,o,!1,null,null,null);t["a"]=p.exports},"1b6d":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"map-menu",attrs:{id:"map-menu","data-v-step":"map-menu"}},[t("v-card",{staticClass:"map-menu-wrapper"},[t("div",{staticClass:"map-menu-controller"},[t("div",{staticClass:"map-menu-controller-title"},[t("span",[e._v(e._s(e.$t("menu")))])]),t("div",{staticClass:"map-menu-controller-actions"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.clearMenu()}}},[t("v-icon",[e._v("mdi-broom")])],1),t("div",[e.getSelectedLayers().length<=1?t("v-btn",{attrs:{icon:""}},[t("v-icon",[e._v("mdi-layers-off")])],1):t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleLayerOverlay()}}},[t("v-icon",[e._v("mdi-layers")])],1)],1),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleMenu()}}},[t("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.getMapMenuStatus,expression:"getMapMenuStatus"}]},[e._v("mdi-close")]),t("v-icon",{directives:[{name:"show",rawName:"v-show",value:!e.getMapMenuStatus,expression:"!getMapMenuStatus"}]},[e._v("mdi-open-in-new")])],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.getMapMenuStatus,expression:"getMapMenuStatus"}],staticClass:"map-menu-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[t("v-skeleton-loader",{staticClass:"mx-auto mb-5",attrs:{"max-width":"300",type:"image",loading:""}}),e._l(10,(function(e){return t("v-skeleton-loader",{key:e,staticClass:"mx-auto mb-3",attrs:{"max-width":"300",type:"text",loading:""}})}))],2),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},[t("div",{staticClass:"map-menu-content-inner"},[t("DatePicker",{attrs:{loadFeatures:e.loadFeatures}}),t("Layers",{attrs:{loadFeatures:e.loadFeatures,clearMapData:e.clearMapData,removeLayer:e.removeLayer}})],1)])])])],1)},o=[],i=a("e11e"),r=a.n(i),n=a("ed08"),l=a("c1df"),c=a.n(l),d=a("bc3a"),p=a.n(d),u=a("1c4d"),m=a("e882"),h=a("2ef0"),g={name:"MapMenu",props:["loadFeatures","clearMapData","removeLayer"],components:{DatePicker:u["a"],Layers:m["a"]},data(){return{loading:!0,initialMenuData:{}}},mounted(){this.loading=!0;const e=document.getElementById("map-menu"),t=new r.a.Draggable(e);t.enable();const a=document.getElementsByClassName("map-menu-controller")[0];a.addEventListener("mousedown",()=>{a.style.cursor="grabbing"}),a.addEventListener("mouseup",()=>{a.style.cursor="grab"});let s=Object(n["b"])("layer");this.updateLoading(!0),p.a.get(s).then(e=>{const{data:t,errors:a}=e.data;if(!Object(h["isEmpty"])(a))return this.updateLoading(!1),Object(n["g"])(a);const s=Object.assign([],t),o=Object.assign([],s);this.$store.dispatch("updateInitialLayers",o),localStorage.setItem("menu",JSON.stringify(s)),this.$store.dispatch("updateLayers",s),this.loading=!1,this.updateLoading(!1)}).catch(e=>{console.error(e);const t={open:!0,color:"",text:"error_get_layers",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1,this.updateLoading(!1)})},methods:{updateLoading(e){const t=this.$store.getters.map;this.$store.dispatch("updateMap",{...t,loading:e})},clearMenu(){this.clearMapData().then(()=>{const e=JSON.parse(localStorage.getItem("menu"));this.$store.dispatch("updateLayers",e);let t=c()().format("yyyy-MM-DD");this.$store.dispatch("updateDates",[t,t]),this.$store.dispatch("updateDates",[t,t])});const e={open:!0,color:"",text:"reset_menu",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",e)},toggleMenu(){let e=this.getMapMenuStatus;this.$store.dispatch("updateMenu",!e)},toggleLayerOverlay(){let e=this.$store.getters.layerOverlay;this.$store.dispatch("updateLayerOverlay",!e)},getSelectedLayers(){return Object(n["o"])()}},computed:{getMapMenuStatus(){return this.$store.getters.menu}}},v=g,y=(a("3182"),a("2877")),b=Object(y["a"])(v,s,o,!1,null,null,null);t["a"]=b.exports},3148:function(e,t,a){"use strict";a("a468")},3182:function(e,t,a){"use strict";a("6938")},"3a6c6":function(e,t,a){},4039:function(e,t,a){},"4a0b":function(e,t,a){},5202:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),o=a("3dfd"),i=a("260b"),r=(a("ea7b"),a("000b"),a("fa4b")),n=a("7c41"),l=a("07a4"),c=a("0692"),d=a("ddb8"),p=a("e95d"),u=a("cd94"),m=a("ed08");a("90b8");s["default"].prototype.$workbox=d["a"],s["default"].config.productionTip=!1;var h={apiKey:"AIzaSyBIPyFe5XZajIogdH7HNIbrwtPr38iXl94",authDomain:"crimeradar-dev.firebaseapp.com",databaseURL:"https://crimeradar-dev.firebaseio.com",projectId:"crimeradar-dev",storageBucket:"crimeradar-dev.appspot.com",messagingSenderId:"942273115466",appId:"1:942273115466:web:9e4b253554dee91f0fbdb3",measurementId:"G-PW2ZP0DJ2M"};try{i["a"].initializeApp(h),i["a"].getCurrentUser=()=>new Promise((e,t)=>{const a=i["a"].auth().onAuthStateChanged(t=>{a(),e(t)},t)}),i["a"].analytics()}catch(g){console.error("[FIREBASE] COULD NOT START FIREBASE!",g)}Object(m["s"])()?new s["default"]({i18n:c["a"],router:u["a"],store:l["a"],vuetify:n["a"],render:e=>e(p["a"])}).$mount("#app"):new s["default"]({router:r["a"],vuetify:n["a"],store:l["a"],i18n:c["a"],render:e=>e(o["a"])}).$mount("#app")},"5a4e":function(e,t,a){},"5d73":function(e,t,a){"use strict";a("f348")},6457:function(e,t,a){"use strict";a("4039")},6819:function(e,t,a){"use strict";a("c35a")},6938:function(e,t,a){},"69ae":function(e,t,a){"use strict";a("5a4e")},"6d55":function(e,t,a){"use strict";a("5202")},"721c":function(e,t,a){"use strict";a("4a0b")},7407:function(e,t,a){},"7a0b":function(e,t,a){},9195:function(e,t,a){"use strict";a("7407")},"93fd":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("v-dialog",{staticClass:"popup",attrs:{fullscreen:"",persistent:"",transition:"dialog-bottom-transition",scrollable:"",eager:"","no-click-animation":"","retain-focus":""},model:{value:e.popup.open,callback:function(t){e.$set(e.popup,"open",t)},expression:"popup.open"}},[t("v-sheet",{class:"opacity-95"},[t("div",{staticClass:"popup-content"},[t("div",{class:"popup-header"},[t("span",[e._v(" "+e._s(e.popup.data&&e.popup.data.name)+" ")]),t("div",{staticClass:"popup-header-actions"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleTray()}}},[t("v-icon",[e._v(e._s(e.popup.tray?"mdi-arrow-up":"mdi-arrow-down"))])],1),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.closePopup()}}},[t("v-icon",[e._v("mdi-close")])],1)],1)]),t("div",{staticClass:"popup-body"},[t("div",{staticClass:"popup-wrapper-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.popup.tabs,expression:"popup.tabs"}],staticClass:"popup-tabs"},[t("v-tabs",{attrs:{grow:"",color:e.getColor()},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[t("v-tabs-slider",{attrs:{color:"teal"}}),e._l(e.popup.tabs,(function(a,s){return t("v-tab",{key:s},[e._v(" "+e._s(e.getLabel(a,e.$i18n.locale))+" ")])}))],2),t("v-tabs-items",{staticClass:"popup-tab-items",model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},e._l(e.popup.tabs,(function(a,s){return t("v-tab-item",{key:s,staticClass:"popup-tab-item"},[t("v-card",{attrs:{elevation:"2",outlined:"",shaped:""}},[t("div",{staticClass:"popup-tab-content"},[t("div",{staticClass:"popup-tab",style:a.style},e._l(a.charts,(function(e,a){return t("div",{key:a,staticClass:"chart"},[t("Chart",{attrs:{options:e.options,styles:e.style,gridName:""+e.name,interactive:e.interactive}})],1)})),0)])])],1)})),1)],1)])])])])],1)},o=[],i=a("5b7f"),r=a("ed08"),n=(a("c1df"),{name:"Popup",props:["popup","closePopup"],components:{Chart:i["a"]},data(){return{selectedTab:null}},mounted(){},methods:{getLabel(e,t){return Object(r["k"])(e,t)},isPredictionLayer(){const e=Object.assign([],this.$store.getters.layers);let t=!1;return e.map(e=>{e.layers.map(e=>{49===e.id&&e.selected&&(t=!0)})}),t},toggleTray(){this.popup.tray=!this.popup.tray;const e=document.querySelector(".opacity-95").parentNode,t=document.querySelector(".popup-header");this.popup.tray?(e.style.top="99999px",t.style.bottom="0px",t.style.top="unset"):(e.style.top="unset",t.style.bottom="unset",t.style.top="0px")},getColor(){return this.$vuetify.theme.dark?"#FFF":"#000"}},computed:{getSelectedTab(){const e=this.popup.tabs.find(e=>e.selected);return e}}}),l=n,c=(a("6457"),a("2877")),d=Object(c["a"])(l,s,o,!1,null,null,null);t["a"]=d.exports},a468:function(e,t,a){},aa9e:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tour-wrapper"},["en"===e.language?t("div",[t("TourEnglish")],1):e._e(),"pt"===e.language?t("div",[t("TourPortuguese")],1):e._e()])},o=[],i=function(){var e=this,t=e._self._c;return t("v-tour",{attrs:{name:"tour",steps:e.steps,options:e.options,callbacks:e.callbacks}})},r=[],n={name:"TourEnglish",data(){return{callbacks:{onStart:this.startTourCallback,onStop:this.finishTourCallback},steps:[{target:'[data-v-step="navbar"]',header:{title:"Navbar"},content:"\n                  <div>\n                    Here you will find: <b>Map, Management, Help, Settings</b>\n                    <br><br>\n                    To know more of each one of those, you can click on it and navigate through the pages.\n                  </div>\n                ",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".map-wrapper",1),e()})},{target:'[data-v-step="navbar-item-map"]',header:{title:"Map"},content:"This button will bring you to the <b>MAP</b> page.",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".map-wrapper",.2),e()})},{target:'[data-v-step="navbar-item-management"]',header:{title:"Management"},content:"This button will bring you to the <b>MANAGEMENT</b> page.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-feedback"]',header:{title:"Feedback"},content:"This button will bring you to the <b>FEEDBACK</b> page.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-helper"]',header:{title:"Helper"},content:"This button will bring you to the <b>HELPER</b> page.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-settings"]',header:{title:"Settings"},content:"This button will bring you to the <b>SETTINGS</b> page.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-logout"]',header:{title:"Logout"},content:"This button will logout the system.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-language"]',header:{title:"Language"},content:"This button will change the system languague.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-theme"]',header:{title:"Theme"},content:"This button will change the system theme.",params:{placement:"right"}},{target:'[data-v-step="navbar-item-tour"]',header:{title:"Tour"},content:"This button will show a walkthrough the system.",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",1),this.setElementOpacity(".map-wrapper",.2),e()})},{target:".leaflet-control-geosearch",header:{title:"Search"},content:"Here you will be able to search any place in the world.",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",.2),this.setElementOpacity(".map-wrapper",1),e()})},{target:".leaflet-control-layers",header:{title:"Controller"},content:"With this button you will be able to switch map styles and show/hide active layers.",params:{placement:"left"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",.2),e()})},{target:'[data-v-step="map-menu"]',header:{title:"Menu"},content:"\n                    In this menu you will be able to toggle on and off all system layers and it's options. <br>\n                    Then, you can see the georeferenced data \n                ",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",1),e()})},{target:'[data-v-step="legend"]',header:{title:"Legend"},content:"This box will show a legend of active layers on the system.",params:{placement:"left"}},{target:'[data-v-step="toolbox"]',header:{title:"Toolbox"},content:"This is a fast way to change menu dates."}],options:{useKeyboardNavigation:!0,highlight:!0,labels:{buttonSkip:"Skip tour",buttonPrevious:"Previous",buttonNext:"Next",buttonStop:"Finish"}}}},methods:{setElementOpacity(e,t){const a=document.querySelector(e);a.style.opacity=t},startTourCallback(){},finishTourCallback(){this.setElementOpacity(".nav",1),this.setElementOpacity(".map-wrapper",1)}}},l=n,c=a("2877"),d=Object(c["a"])(l,i,r,!1,null,null,null),p=d.exports,u=function(){var e=this,t=e._self._c;return t("v-tour",{attrs:{name:"tour",steps:e.steps,options:e.options,callbacks:e.callbacks}})},m=[],h={name:"TourPortuguese",data(){return{callbacks:{onStart:this.startTourCallback,onStop:this.finishTourCallback},steps:[{target:'[data-v-step="navbar"]',header:{title:"Navbar"},content:"\n                  <div>\n                    Aqui voce tera rapido acesso aos seguintes itens: <b>Mapa, Gerenciamento, Ajuda, Configuracoes</b>\n                    <br><br>\n                    Para saber mais sobre cada um deles, continue pelo tour.\n                  </div>\n                ",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".map-wrapper",1),e()})},{target:'[data-v-step="navbar-item-map"]',header:{title:"Map"},content:"Acesso ao mapa",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".map-wrapper",.2),e()})},{target:'[data-v-step="navbar-item-management"]',header:{title:"Gerenciamento"},content:"Acesso ao gerenciamento",params:{placement:"right"}},{target:'[data-v-step="navbar-item-feedback"]',header:{title:"Reporte"},content:"Acesso ao reporte",params:{placement:"right"}},{target:'[data-v-step="navbar-item-helper"]',header:{title:"Manual"},content:"Acesso ao manual",params:{placement:"right"}},{target:'[data-v-step="navbar-item-settings"]',header:{title:"Configurações"},content:"Acesso as configurações",params:{placement:"right"}},{target:'[data-v-step="navbar-item-language"]',header:{title:"Language"},content:"Change system language",params:{placement:"right"}},{target:'[data-v-step="navbar-item-theme"]',header:{title:"Theme"},content:"Change system theme",params:{placement:"right"}},{target:'[data-v-step="navbar-item-tour"]',header:{title:"Tour"},content:"Tour",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",1),this.setElementOpacity(".map-wrapper",.2),e()})},{target:".leaflet-control-geosearch",header:{title:"Search"},content:"Aqui sera possivel...",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",.2),this.setElementOpacity(".map-wrapper",1),e()})},{target:".leaflet-control-layers",header:{title:"Controller"},content:"Controle de camadas do mapa",params:{placement:"left"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",.2),e()})},{target:'[data-v-step="map-menu"]',header:{title:"Menu"},content:"\n                    Atraves desse menu será possivel habilitar as camadas e selecionar datas para a exibicao dos dados\n                ",params:{placement:"right"},before:e=>new Promise((e,t)=>{this.setElementOpacity(".nav",1),e()})},{target:'[data-v-step="legend"]',header:{title:"Legend"},content:"An awesome plugin made with Vue.js!",params:{placement:"left"}},{target:'[data-v-step="toolbox"]',header:{title:"Toolbox"},content:"Toolbox"}],options:{useKeyboardNavigation:!0,highlight:!0,labels:{buttonSkip:"Pular tour",buttonPrevious:"Anterior",buttonNext:"Proximo",buttonStop:"Terminar"}}}},methods:{setElementOpacity(e,t){const a=document.querySelector(e);a.style.opacity=t},startTourCallback(){},finishTourCallback(){this.setElementOpacity(".nav",1),this.setElementOpacity(".map-wrapper",1)}}},g=h,v=Object(c["a"])(g,u,m,!1,null,null,null),y=v.exports,b={name:"Tour",components:{TourEnglish:p,TourPortuguese:y},computed:{language(){return this.$i18n.locale}}},f=b,_=(a("5d73"),Object(c["a"])(f,s,o,!1,null,null,null));t["a"]=_.exports},bf88:function(e,t,a){"use strict";a("7a0b")},c35a:function(e,t,a){},c447:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"manage",attrs:{shaped:"",outlined:""}},[t("div",{staticClass:"manage-header"},[t("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t("v-tabs-slider",{attrs:{color:e.color}}),e._l(e.items,(function(a){return t("v-tab",{key:a.type,attrs:{ripple:"","show-arrows":!1}},[e._v(" "+e._s(e.$t(a.type))+" ")])}))],2)],1),t("div",{staticClass:"manage-content"},[t("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(a,s){return t("v-tab-item",{key:s,attrs:{dark:""}},[t("div",{staticClass:"manage-type"},["users"===a.type.toLowerCase()?t("div",{key:a.type,staticClass:"users"},[t("Users",{attrs:{color:e.color}})],1):e._e(),"roles"===a.type.toLowerCase()?t("div",{key:a.type,staticClass:"roles"},[t("Roles",{attrs:{color:e.color}})],1):e._e()])])})),1)],1)])},o=[],i=a("bc3a"),r=a.n(i),n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"justify-end",staticStyle:{display:"flex"}},[e.getUserScopes().includes("user.create")?t("v-btn",{staticClass:"mx-2",attrs:{fab:"","x-small":"",color:"primary",disabled:e.loading||e.loadingRoles},on:{click:function(t){return e.add()}}},[t("v-icon",[e._v(" mdi-plus ")])],1):e._e()],1),t("div",{staticClass:"users-wrapper"},[e.getUserScopes().includes("user.list.view")?t("v-card",{staticClass:"users-list",attrs:{outlined:""}},[t("v-list",{attrs:{rounded:""}},[t("v-subheader",[e._v(e._s(e.$t("users")))]),e._l(10,(function(a){return t("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:0===e.users.length,expression:"users.length === 0"}],key:a,staticClass:"mx-auto",attrs:{type:"list-item",loading:""}})})),t("v-list-item-group",{attrs:{value:e.selectedUser.uid,color:e.color}},e._l(e.users,(function(a,s){return t("v-list-item",{key:s,attrs:{value:a.uid,ripple:"",disabled:e.loading||e.loadingRoles},on:{click:function(t){return e.onChangeUser(a)}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-account")])],1),t("v-list-item-content",[t("v-list-item-title",{domProps:{textContent:e._s(a.name)}})],1),t("v-list-item-action",[t("div",{staticStyle:{display:"flex",gap:"5px"}},[e.getUserScopes().includes("user.edit")?t("v-btn",{attrs:{light:"",color:e.color,fab:"","x-small":""},on:{click:t=>e.edit(t,a)}},[t("v-icon",[e._v("mdi-pencil")])],1):e._e(),e.getUserScopes().includes("user.delete")?t("v-btn",{attrs:{fab:"",light:"",color:"red lighten-1","x-small":""},on:{click:t=>e.del(t,a)}},[t("v-icon",[e._v("mdi-delete")])],1):e._e()],1)])],1)})),1)],2)],1):e._e(),t("div",{staticClass:"manage-user-role-group"},[t("div",{staticClass:"user-role"},[e.getUserScopes().includes("role.list.view")?t("v-card",{staticClass:"manage-user-item",attrs:{outlined:""}},[t("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loadingRoles,expression:"loadingRoles"}],attrs:{color:e.color,type:"linear"}}),t("v-list",{attrs:{rounded:"",disabled:""}},[t("v-subheader",[e._v(e._s(e.$t("roles")))]),e._l(3,(function(a){return t("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:0===e.roles.length,expression:"roles.length === 0"}],key:a,staticClass:"mx-auto",attrs:{type:"list-item",loading:""}})})),t("v-list-item-group",{attrs:{value:e.selectedUser.roles,multiple:"",color:e.color}},e._l(e.roles,(function(a,s){return t("v-list-item",{key:s,attrs:{value:a,ripple:""},on:{click:function(t){return e.onChangeRole(a)}}},[t("v-list-item-content",[t("v-list-item-title",{domProps:{textContent:e._s(a)}})],1)],1)})),1)],2)],1):e._e()],1)]),e.modal.open?t("Modal",{attrs:{modal:e.modal,close:e.close,save:e.save,color:e.color,editingData:e.selectedUser,listItems:e.roles,loading:e.loading}}):e._e(),t("v-dialog",{attrs:{"max-width":"500"},model:{value:e.dialog.open,callback:function(t){e.$set(e.dialog,"open",t)},expression:"dialog.open"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("delete_user"))+" ")]),t("v-card-text",[e._v(" "+e._s(e.$t("delete_user_warn"))+" "),t("b",[e._v(" "+e._s(e.$t(e.dialog.user.name)))]),e._v(". "),t("br"),e._v(" "+e._s(e.$t("undoable_action"))+" ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:e.color,text:"",ripple:"",width:"100"},on:{click:function(t){e.dialog.open=!1}}},[e._v(" "+e._s(e.$t("dialog_close"))+" ")]),t("v-btn",{attrs:{color:"red darken-1",filled:"",ripple:"",width:"100"},on:{click:function(t){return e.delUser(e.dialog.user)}}},[e._v(" "+e._s(e.$t("dialog_delete"))+" ")])],1)],1)],1)],1)])},l=[],c=(a("14d9"),a("260b")),d=(a("ea7b"),function(){var e=this,t=e._self._c;return t("v-row",{attrs:{justify:"space-around"}},[t("v-col",{attrs:{cols:"auto"}},[t("v-dialog",{attrs:{"max-width":"600"},on:{"click:outside":()=>e.close()},model:{value:e.modal.open,callback:function(t){e.$set(e.modal,"open",t)},expression:"modal.open"}},[[t("v-card",[t("v-toolbar",{attrs:{color:"primary",dark:""}},[t("div",{staticClass:"text-h5"},[e._v(e._s(e.$t(e.modal.type.title)))])]),e.loading?t("Loading",{attrs:{color:e.color,type:"linear"}}):e._e(),t("v-card-text",{staticClass:"card-wrapper"},[t("div",{staticClass:"text pt-10"},["users"===e.modal.type.type?t("div",["create"===e.modal.mode?t("div",[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-text-field",{attrs:{label:e.$t("label_email"),"hide-details":"auto",dense:"",outlined:""},model:{value:e.data.user.email,callback:function(t){e.$set(e.data.user,"email",t)},expression:"data.user.email"}})],1),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-text-field",{attrs:{label:e.$t("label_name"),"hide-details":"auto",dense:"",outlined:""},model:{value:e.data.user.name,callback:function(t){e.$set(e.data.user,"name",t)},expression:"data.user.name"}})],1),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-autocomplete",{attrs:{items:e.listItems,outlined:"",dense:"","hide-details":"auto","small-chips":"",label:e.$t("label_role"),multiple:""},model:{value:e.data.user.roles,callback:function(t){e.$set(e.data.user,"roles",t)},expression:"data.user.roles"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-2",label:e.$t("label_password"),hint:e.$t("min_char"),"hide-details":"auto",outlined:"",dense:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.data.user.password,callback:function(t){e.$set(e.data.user,"password",t)},expression:"data.user.password"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{"append-icon":e.show2?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show2?"text":"password",name:"input-10-2",label:e.$t("label_confirm_password"),hint:e.$t("min_char"),"hide-details":"auto",dense:"",outlined:""},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.data.user.confirmPassword,callback:function(t){e.$set(e.data.user,"confirmPassword",t)},expression:"data.user.confirmPassword"}})],1)],1)],1):e._e(),"edit"===e.modal.mode?t("div",[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-text-field",{attrs:{label:e.$t("label_email"),"hide-details":"auto",dense:"",outlined:""},model:{value:e.editingData.email,callback:function(t){e.$set(e.editingData,"email",t)},expression:"editingData.email"}})],1),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-text-field",{attrs:{label:e.$t("label_name"),"hide-details":"auto",dense:"",outlined:""},model:{value:e.editingData.name,callback:function(t){e.$set(e.editingData,"name",t)},expression:"editingData.name"}})],1),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-autocomplete",{attrs:{items:e.listItems,outlined:"",dense:"",chips:"","hide-details":"auto","small-chips":"",label:e.$t("label_role"),multiple:""},model:{value:e.editingData.roles,callback:function(t){e.$set(e.editingData,"roles",t)},expression:"editingData.roles"}})],1)],1)],1):e._e()]):e._e(),"role"===e.modal.type.type?t("div",["create"===e.modal.mode?t("div",{staticClass:"role"},[t("v-text-field",{attrs:{label:e.$t("label_name"),"hide-details":"auto",dense:"",outlined:""},model:{value:e.data.role.name,callback:function(t){e.$set(e.data.role,"name",t)},expression:"data.role.name"}}),t("v-autocomplete",{attrs:{chips:"","small-chips":"",multiple:"",outlined:"",items:e.listItems,label:e.$t("scopes")},scopedSlots:e._u([{key:"selection",fn:function(a){return[t("v-chip",e._b({attrs:{"input-value":a.selected,close:"",small:""},on:{click:a.select,"click:close":t=>e.remove(t,a.item)}},"v-chip",a.attrs,!1),[e._v(" "+e._s(a.item)+" ")])]}}],null,!1,1866294084),model:{value:e.data.role.scopes,callback:function(t){e.$set(e.data.role,"scopes",t)},expression:"data.role.scopes"}})],1):e._e(),"edit"===e.modal.mode?t("div",{staticClass:"role"},[t("v-text-field",{attrs:{label:e.$t("label_name"),"hide-details":"auto",dense:"",outlined:""},model:{value:e.editingData.name,callback:function(t){e.$set(e.editingData,"name",t)},expression:"editingData.name"}}),t("v-autocomplete",{attrs:{chips:"","small-chips":"",multiple:"",outlined:"",items:e.listItems,label:e.$t("scopes")},model:{value:e.editingData.scopes,callback:function(t){e.$set(e.editingData,"scopes",t)},expression:"editingData.scopes"}})],1):e._e()]):e._e()])]),t("v-card-actions",{staticClass:"justify-end"},[t("v-btn",{attrs:{color:e.color,text:"",ripple:"",width:"75"},on:{click:()=>e.closeModal()}},[e._v(e._s(e.$t("dialog_close")))]),"edit"===e.modal.mode?t("v-btn",{attrs:{color:"green darken-1",filled:"",disabled:e.loading,ripple:"",width:"75"},on:{click:function(t){return e.confirmModal(e.editingData)}}},[e._v(e._s(e.$t("dialog_edit")))]):e._e(),"create"===e.modal.mode?t("v-btn",{attrs:{color:"green darken-1",filled:"",disabled:e.loading,ripple:"",width:"75"},on:{click:function(t){return e.confirmModal(e.data)}}},[e._v(e._s(e.$t("dialog_save")))]):e._e()],1)],1)]],2)],1)],1)}),p=[],u=a("c154"),m={name:"Modal",components:{Loading:u["a"]},props:["modal","close","loading","color","save","editingData","listItems"],data(){return{data:{role:{name:"",scopes:[]},user:{name:"",roles:[],email:"",password:"",confirmPassword:""}},show1:!1,show2:!1,rules:{required:e=>!!e||this.getMessage("REQUIRED"),min:e=>e.length>=6||this.getMessage("MIN_CHAR")},scopes:[],roles:[]}},methods:{closeModal(){this.clearData().then(()=>this.close())},confirmModal(e){this.save(e)},remove(e,t){const a=this.data.role.scopes.indexOf(t);a>=0&&this.data.role.scopes.splice(a,1)},getMessage(e){switch(e){case"REQUIRED":return"en"===this.$i18n.locale?"Required":"Obrigatório";case"MIN_CHAR":return"en"===this.$i18n.locale?"Min 6 characters":"Mínimo de 6 caracteres";default:return""}},async clearData(){this.data={role:{name:"",scopes:[]},user:{name:"",roles:[],email:"",password:"",confirmPassword:""}}}}},h=m,g=(a("c805"),a("2877")),v=Object(g["a"])(h,d,p,!1,null,null,null),y=v.exports,b=a("ed08"),f=a("2ef0"),_={name:"Users",props:["openSnackbar","color","origin"],components:{Modal:y,Loading:u["a"]},data(){return{modal:{open:!1,type:{type:"",title:""},mode:""},snackbar:{open:!1,color:"",text:"",timeout:2500},selectedUser:{uid:"",name:"",roles:[],groups:[],email:"",id:""},defaultRoles:[],roles:[],groups:[],users:[],dialog:{open:!1,user:{id:"",name:""}},defaultData:{},loading:!1,loadingRoles:!1}},beforeCreate(){r.a.defaults.headers.common["Authorization"]=localStorage.getItem("crimeradarToken")},mounted(){this.getUsers(),this.getRoles()},methods:{getUserScopes(){return Object(b["r"])()},getUsers(){let e=Object(b["b"])("user");r.a.get(e).then(e=>{const{data:t,errors:a}=e.data;if(!Object(f["isEmpty"])(a))return Object(b["g"])(a);this.users=t}).catch(e=>{const t={open:!0,color:"",text:"error_load_users",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t)})},getRoles(){let e=Object(b["b"])("role");r.a.get(e).then(e=>{const{data:t,errors:a}=e.data;if(!Object(f["isEmpty"])(a))return Object(b["g"])(a);this.defaultRoles=t;let s=[];t.map(e=>{s.push(e.name)}),this.roles=s}).catch(e=>{const t={open:!0,color:"",text:"error_load_roles",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t)})},edit(e,t){e.stopPropagation(),this.onChangeUser(t,!0).then(()=>{this.modal={open:!0,type:{type:"users",title:"edit_user"},mode:"edit"}})},del(e,t){e.stopPropagation(),this.dialog.open=!0,this.dialog.user=t},delUser(e){const t=Object(b["b"])("user/"+e.id);r.a.delete(t).then(e=>{const{errors:t}=e.data;if(!Object(f["isEmpty"])(t))return Object(b["g"])(t);const a={open:!0,color:"",text:"succes_delete_user",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",a),this.dialog={open:!1,user:{id:"",name:""}}}).then(()=>this.getUsers())},async save(e){if(this.loading=!0,"create"===this.modal.mode){let t=Object(b["b"])("user");c["a"].auth().createUserWithEmailAndPassword(e.user.email.toLowerCase(),e.user.password).then(a=>{let s=this.defaultRoles.filter(t=>e.user.roles.includes(t.name)),o={uid:a.user.uid,email:a.user.email,name:e.user.name,role:e.user.role,active:!0,roles:s};r.a.post(t,o).then(t=>{const{errors:a}=t.data;if(!Object(f["isEmpty"])(a))return this.loading=!1,Object(b["g"])(a);c["a"].auth().sendPasswordResetEmail(e.user.email.toLowerCase()).then(()=>{const e={open:!0,color:"",text:"success_create_user",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",e),this.loading=!1}).catch(e=>{const t={open:!0,color:"",text:"error_create_user",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1})}).then(()=>{this.close(),this.getUsers()}).catch(t=>{this.deleteUserFirebase(o.email,e.user.password);const a={open:!0,color:"",text:"error_create_user",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",a),this.loading=!1})}).catch(e=>{console.log(e);const t={open:!0,color:"",text:"error_create_user",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1})}else{let t=this.defaultRoles.filter(t=>e.roles.includes(t.name)),a=Object(b["b"])("user/"+e.id),s={id:e.id,name:e.name,roles:t,email:e.email};r.a.patch(a,s).then(e=>{const{errors:t}=e.data;if(!Object(f["isEmpty"])(t))return this.loading=!1,Object(b["g"])(t);const a={open:!0,color:"",text:"success_edit_user",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",a),this.loading=!1}).then(()=>{this.close(),this.getUsers()}).catch(()=>{this.loading=!1;const e={open:!0,color:"",text:"error_edit_user",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",e)})}},add(){this.modal={open:!0,type:{type:"users",title:"create_user"},mode:"create"}},close(){this.modal={open:!1,type:{type:"",title:""},mode:""},this.selectedUser={uid:"",name:"",roles:[],groups:[],id:""}},async onChangeUser(e,t=!1){if(this.selectedUser.uid==e.uid&&!t)return this.selectedUser={uid:"",name:"",roles:[],groups:[],id:""};this.loadingRoles=!0,this.loading=!0;let a=Object(b["b"])("user/"+e.id);r.a.get(a).then(e=>{const{data:t,errors:a}=e.data;if(!Object(f["isEmpty"])(a))return this.loadingRoles=!1,this.loading=!1,Object(b["g"])(a);let s={uid:t.uid,name:t.name,roles:t.roles.map(e=>e.name),groups:[],email:t.email,id:t.id};this.selectedUser=s,this.loadingRoles=!1,this.loading=!1}).catch(e=>{const t={open:!0,color:"",text:"error_retrieve_user",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loadingRoles=!1,this.loading=!1})},onChangeRole(e){if(""===this.selectedUser.name){const e={open:!0,color:"",text:"warning_select_user",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",e),this.selectedUser={uid:"",name:"",roles:[],groups:[],id:""}}else{let t=this.selectedUser.roles.find(t=>t===e);if(t){let t=this.selectedUser.roles.filter(t=>t!==e);this.selectedUser.roles=t}else this.selectedUser.roles.push(e)}},onChangeGroup(e){if(""===this.selectedUser.name){const e={open:!0,color:"",text:"warning_select_user",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",e),this.selectedUser={uid:"",name:"",roles:[],groups:[],id:""}}else{let t=this.selectedUser.groups.find(t=>t===e);if(t){let t=this.selectedUser.groups.filter(t=>t!==e);this.selectedUser.groups=t}else this.selectedUser.groups.push(e)}},deleteUserFirebase(e,t){c["a"].auth().signInWithEmailAndPassword(e,t).then(e=>{e.user&&e.user.delete().then(()=>{console.log("user created on firebase, but deleted cause an API error")})}).catch(e=>console.log("error to delete user created on firebase"))}}},w=_,k=(a("c963"),Object(g["a"])(w,n,l,!1,null,null,null)),x=k.exports,O=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"justify-end",staticStyle:{display:"flex"}},[e.getUserScopes().includes("role.create")?t("v-btn",{staticClass:"mx-2",attrs:{fab:"","x-small":"",color:"primary",disabled:e.loading||e.loadingScopes},on:{click:function(t){return e.add()}}},[t("v-icon",[e._v(" mdi-plus ")])],1):e._e()],1),t("div",{staticClass:"roles-wrapper"},[e.getUserScopes().includes("role.list.view")?t("v-card",{staticClass:"role-list",attrs:{outlined:""}},[t("v-list",{attrs:{rounded:""}},[t("v-subheader",[e._v(e._s(e.$t("roles")))]),e._l(10,(function(a){return t("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:0===e.roles.length,expression:"roles.length === 0"}],key:a,staticClass:"mx-auto",attrs:{type:"list-item",loading:""}})})),t("v-list-item-group",{attrs:{value:e.selectedRole.id,color:e.color}},e._l(e.roles,(function(a,s){return t("v-list-item",{key:s,attrs:{value:a.id,ripple:"",disabled:e.loading||e.loadingScopes},on:{click:()=>e.onChangeRole(a)}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-account")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(a.name))])],1),t("v-list-item-action",[t("div",{staticStyle:{display:"flex",gap:"5px"}},[e.getUserScopes().includes("role.edit")?t("v-btn",{attrs:{light:"",color:e.color,fab:"","x-small":""},on:{click:t=>e.edit(t,a)}},[t("v-icon",[e._v("mdi-pencil")])],1):e._e(),e.getUserScopes().includes("role.delete")?t("v-btn",{attrs:{fab:"",light:"",color:"red lighten-1","x-small":""},on:{click:t=>e.del(t,a)}},[t("v-icon",[e._v("mdi-delete")])],1):e._e()],1)])],1)})),1)],2)],1):e._e(),e.getUserScopes().includes("scope.list.view")?t("v-card",{staticClass:"scope-list",attrs:{outlined:""}},[t("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loadingScopes,expression:"loadingScopes"}],attrs:{color:e.color,type:"linear"}}),t("v-list",{attrs:{rounded:"",disabled:""}},[t("v-subheader",[e._v(e._s(e.$t("scopes")))]),e._l(10,(function(a){return t("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:0===e.scopes.length&&""===e.selectedRole.id,expression:"scopes.length === 0 && selectedRole.id === ''"}],key:a,staticClass:"mx-auto",attrs:{type:"list-item",loading:""}})})),t("v-list-item-group",{attrs:{value:e.selectedRole.scopes,multiple:"",color:e.color}},e._l(e.scopes,(function(a,s){return t("v-list-item",{key:s,attrs:{value:a,ripple:""},on:{click:function(t){return e.onChangeScope(a)}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-account")])],1),t("v-list-item-content",[t("v-list-item-title",{domProps:{textContent:e._s(a)}})],1)],1)})),1)],2)],1):e._e(),e.getUserScopes().includes("user.list.view")?t("v-card",{staticClass:"scoped-users-list",attrs:{outlined:""}},[t("v-list",{attrs:{rounded:"",disabled:""}},[t("v-subheader",[e._v(e._s(e.$t("users")))]),e._l(10,(function(a){return t("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedRole.users.length,expression:"selectedRole.users.length === 0"}],key:a,staticClass:"mx-auto",attrs:{type:"list-item",loading:""}})})),t("v-list-item-group",{attrs:{color:e.color}},e._l(e.selectedRole.users,(function(a,s){return t("v-list-item",{key:s,attrs:{ripple:""}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-account")])],1),t("v-list-item-content",[t("v-list-item-title",{domProps:{textContent:e._s(a.name)}})],1)],1)})),1)],2)],1):e._e(),t("Modal",{attrs:{modal:e.modal,close:e.close,save:e.save,color:e.color,editingData:e.selectedRole,listItems:e.scopes,loading:e.loading}}),t("v-dialog",{attrs:{"max-width":"500"},model:{value:e.dialog.open,callback:function(t){e.$set(e.dialog,"open",t)},expression:"dialog.open"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("delete_role"))+" ")]),t("v-card-text",[e._v(" "+e._s(e.$t("delete_role_warn"))+" "),t("b",[e._v(" "+e._s(e.$t(e.dialog.role.name)))]),e._v(". "),t("br"),e._v(" "+e._s(e.$t("undoable_action"))+" ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:e.color,text:"",ripple:"",width:"100"},on:{click:function(t){e.dialog.open=!1}}},[e._v(" "+e._s(e.$t("dialog_close"))+" ")]),t("v-btn",{attrs:{color:"red darken-1",filled:"",ripple:"",width:"100"},on:{click:function(t){return e.delRole(e.dialog.role)}}},[e._v(" "+e._s(e.$t("dialog_delete"))+" ")])],1)],1)],1)],1)])},$=[],C={name:"Roles",props:["color","api","origin","openSnackbar"],components:{Modal:y,Loading:u["a"]},data(){return{modal:{open:!1,type:{type:"",title:""},mode:""},snackbar:{open:!1,color:"",text:"",timeout:2500},selectedRole:{id:"",name:"",scopes:[],users:[]},roles:[],scopes:[],defaultScopes:[],dialog:{open:!1,role:{id:"",name:""}},loading:!1,loadingScopes:!1}},beforeCreate(){r.a.defaults.headers.common["Authorization"]=localStorage.getItem("crimeradarToken")},mounted(){this.getRoles(),this.getScopes()},methods:{getUserScopes(){return Object(b["r"])()},getRoles(){let e=Object(b["b"])("role");r.a.get(e).then(e=>{const{data:t,errors:a}=e.data;if(!Object(f["isEmpty"])(a))return Object(b["g"])(a);this.roles=t,this.selectedRole.users=[{id:"",name:"- -"}]}).catch(e=>{const t={open:!0,color:"",text:"error_load_roles",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t)})},getScopes(){let e=Object(b["b"])("scope");r.a.get(e).then(e=>{const{data:t,errors:a}=e.data;if(!Object(f["isEmpty"])(a))return Object(b["g"])(a);this.defaultScopes=t,this.scopes=t.map(e=>e.name)}).catch(e=>{const t={open:!0,color:"",text:"error_load_scopes",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t)})},edit(e,t){e.stopPropagation(),this.onChangeRole(t,!0).then(()=>{this.modal={open:!0,type:{type:"role",title:"edit_role"},mode:"edit"}})},del(e,t){e.stopPropagation(),this.dialog.open=!0,this.dialog.role=t},delRole(e){let t=Object(b["b"])("role/"+e.id);r.a.delete(t).then(e=>{const{errors:t}=e.data;if(!Object(f["isEmpty"])(t))return Object(b["g"])(t);const a={open:!0,color:"",text:"success_delete_role",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",a),this.dialog.open=!1,this.dialog.role={id:"",name:""},this.selectedRole={id:"",name:"",scopes:[],users:[{id:"",name:"- -"}]}}).then(()=>this.getRoles()).catch(e=>{console.log(e);const t={open:!0,color:"",text:"error_delete_role",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t)})},async save(e){if(this.loading=!0,"create"===this.modal.mode){let t=Object(b["b"])("role"),a=this.defaultScopes.filter(t=>e.role.scopes.includes(t.name)),s={name:e.role.name,scopes:a};r.a.post(t,s).then(e=>{const{errors:t}=e.data;if(!Object(f["isEmpty"])(t))return Object(b["g"])(t);const a={open:!0,color:"",text:"created_role",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",a),this.loading=!1}).then(()=>{this.close(),this.getRoles()}).catch(e=>{const t={open:!0,color:"",text:"error_create_role",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1})}else{let t=this.defaultScopes.filter(t=>e.scopes.includes(t.name)),a=Object(b["b"])("role/"+e.id),s={name:e.name,scopes:t};r.a.patch(a,s).then(e=>{const{errors:t}=e.data;if(!Object(f["isEmpty"])(t))return Object(b["g"])(t);const a={open:!0,color:"",text:"success_edit_role",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",a),this.loading=!1}).then(()=>{this.close(),this.getRoles()}).catch(e=>{const t={open:!0,color:"",text:"error_edit_role",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1})}},add(){this.modal={open:!0,type:{type:"role",title:"create_role"},mode:"create"}},close(){this.modal={open:!1,type:{type:"",title:""},mode:""},this.selectedRole={id:"",name:"",scopes:[],users:[{id:"",name:"- -"}]}},async onChangeRole(e,t=!1){if(this.selectedRole.id==e.id&&!t)return this.selectedRole={id:"",name:"",scopes:[],users:[{id:"",name:"- -"}]};this.loadingScopes=!0,this.loading=!0;let a=Object(b["b"])("role/"+e.id);r.a.get(a).then(e=>{const{data:t,errors:a}=e.data;if(!Object(f["isEmpty"])(a))return this.loading=!1,this.loadingScopes=!1,Object(b["g"])(a);let s={id:Number.parseInt(t.id),name:t.name,scopes:t.scopes.map(e=>e.name),users:0===t.users.length?[{id:"",name:"- -"}]:t.users};this.selectedRole=s,this.loadingScopes=!1,this.loading=!1}).catch(e=>{console.log(e);const t={open:!0,color:"",text:"error_retrieve_user",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loadingScopes=!1,this.loading=!1})},onChangeScope(e){if(""===this.selectedRole.id){const e={open:!0,color:"",text:"warning_select_scope",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",e),this.selectedRole={id:"",name:"",scopes:[],users:[]}}else{let t=this.selectedRole.scopes.find(t=>t===e);if(t){let t=this.selectedRole.scopes.filter(t=>t!==e);this.selectedRole.roles=t}else this.selectedRole.groups.push(e)}}}},L=C,S=(a("721c"),Object(g["a"])(L,O,$,!1,null,null,null)),M=S.exports,E={name:"Management",components:{Users:x,Roles:M},data(){return{color:"#52FFEE",tab:0,items:[{type:"users",text:"users text",title:"create_user"},{type:"roles",text:"role text",title:"create_role"}]}},beforeCreate(){r.a.defaults.headers.common["Authorization"]=localStorage.getItem("crimeradarToken")}},j=E,T=(a("6819"),Object(g["a"])(j,s,o,!1,null,null,null));t["a"]=T.exports},c805:function(e,t,a){"use strict";a("e650")},c963:function(e,t,a){"use strict";a("1795")},d0ac:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbox",style:{width:e.toolbox?"fit-content":"44px",height:e.toolbox?"fit-content":"44px"},attrs:{"data-v-step":"toolbox"},on:{click:function(t){e.toolbox=!0}}},[t("v-sheet",{staticClass:"toolbox-content"},[e.toolbox?e._e():t("v-icon",[e._v(" mdi-tools ")]),e.toolbox?t("div",[t("div",{staticClass:"quick-search"},[t("div",{staticClass:"close"},[t("span",{staticClass:"close-title"},[e._v(e._s(e.$t("quick_filter")))]),t("v-btn",{attrs:{icon:""},on:{click:t=>{t.stopPropagation(),e.toolbox=!1}}},[t("v-icon",[e._v(" mdi-close ")])],1)],1),t("div",{staticClass:"quick-search-content"},[t("v-card",{attrs:{elevation:"2",outlined:"",shaped:""}},[t("div",{staticClass:"quick-search-items"},e._l(e.actions,(function(a){return t("div",{key:a.name},[t("v-btn",{attrs:{small:a.small,block:""},on:{click:function(t){return e.handleToolboxDate(a.name)}}},["left"===a.direction?t("div",[t("v-icon",{attrs:{left:""}},[e._v(e._s(a.icon))]),e._v(" "+e._s(e.$t(a.name.toLowerCase()))+" ")],1):e._e(),"right"===a.direction?t("div",[e._v(" "+e._s(e.$t(a.name.toLowerCase()))+" "),t("v-icon",{attrs:{right:""}},[e._v(e._s(a.icon))])],1):e._e()])],1)})),0)])],1)])]):e._e()],1)],1)},o=[],i=a("c1df"),r=a.n(i),n={name:"Toolbox",props:["loadFeatures"],data(){return{toolbox:!1,actions:[{name:"PREVIOUS_DAY",icon:"mdi-arrow-left",direction:"left",small:!0},{name:"NEXT_DAY",icon:"mdi-arrow-right",direction:"right",small:!0},{name:"PREVIOUS_WEEK",icon:"mdi-arrow-left",direction:"left",small:!0},{name:"NEXT_WEEK",icon:"mdi-arrow-right",direction:"right",small:!0},{name:"PREVIOUS_MONTH",icon:"mdi-arrow-left",direction:"left",small:!0},{name:"NEXT_MONTH",icon:"mdi-arrow-right",direction:"right",small:!0}]}},methods:{handleToolboxDate(e){let t,a,s=this.$store.getters.dates;if("PREVIOUS_DAY"===e)t=r()(s[0]).subtract(1,"days").format("yyyy-MM-DD"),a=r()(s[1]).subtract(1,"days").format("yyyy-MM-DD");else if("NEXT_DAY"===e)t=r()(s[0]).add(1,"days").format("yyyy-MM-DD"),a=r()(s[1]).add(1,"days").format("yyyy-MM-DD");else if("PREVIOUS_WEEK"===e)t=r()(s[0]).subtract(7,"days").format("yyyy-MM-DD"),a=r()(s[1]).subtract(7,"days").format("yyyy-MM-DD");else if("NEXT_WEEK"===e)t=r()(s[0]).add(7,"days").format("yyyy-MM-DD"),a=r()(s[1]).add(7,"days").format("yyyy-MM-DD");else if("PREVIOUS_MONTH"===e){let e=r()(s[0]),o=r()(e).subtract(1,"month").daysInMonth();t=r()(s[0]).subtract(o,"days").format("yyyy-MM-DD"),a=r()(s[1]).subtract(o,"days").format("yyyy-MM-DD")}else if("NEXT_MONTH"===e){let e=r()(s[0]),o=r()(e).daysInMonth();t=r()(s[0]).add(o,"days").format("yyyy-MM-DD"),a=r()(s[1]).add(o,"days").format("yyyy-MM-DD")}const o=[t,a];this.$store.dispatch("updateDates",o),this.loadFeatures()}}},l=n,c=(a("69ae"),a("2877")),d=Object(c["a"])(l,s,o,!1,null,null,null);t["a"]=d.exports},d540:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"map-wrapper"},[t("div",{staticClass:"map-loading"},[e.getMap.loading?t("Loading",{attrs:{color:"primary",type:"linear"}}):e._e()],1),t("div",{attrs:{id:"map"}},[t("LMap",{ref:e.map.mapRef,attrs:{zoom:e.map.zoom,center:e.map.centerMapCoords,options:e.map.options}},[t("VGeosearch",{attrs:{options:e.map.geosearchOptions}}),t("LControlLayers",{attrs:{position:"topright"}}),e._e(),e._l(e.map.tileLayers,(function(e){return t("LTileLayer",{key:e.name,attrs:{url:e.url,visible:e.visible,name:e.label,attribuition:e.options.attibuition,subdomains:e.options.subdomains,"layer-type":"base"}})})),e._l(e.map.geojsons,(function(e,a){return t("LGeoJson",{key:a,attrs:{geojson:e.data,options:e.options}})})),e._l(e.map.layerGroups,(function(a,s){return t("LLayerGroup",{key:"LAYER_GROUP"+s,ref:"layerGroup",refInFor:!0,attrs:{visible:a.visible,layerType:a.type,name:`${a.name} (${a.featuresAmount})`}},[e._l(a.features.polygon,(function(a,s){return t("LPolygon",{key:"POLYGON"+s,attrs:{options:{id:a.id,name:a.name,value:a.value,defaultStyle:a.defaultStyle,polygon:a._polygon},latLngs:a.geometry,color:a.color,fillColor:a.fillColor,fillOpacity:a.fillOpacity,opacity:a.opacity,weight:a.weight},on:{click:function(t){return e.openPopup(a)}}})})),e._l(a.features.imageOverlay,(function(a,s){return t("LImageOverlay",{key:"IMAGE_OVERLAY"+s,attrs:{className:"IMAGE_OVERLAY_"+a.id,options:{id:a.id,name:a.name},bounds:a.bounds,url:a.url,interactive:a.interactive,zIndex:a.zIndex,opacity:a.opacity},on:{click:function(t){return e.openPopup(a)},mouseenter:t=>e.onMouseEnterImageOverlay(t,a),mouseleave:function(t){return e.onMouseLeaveImageOverlay()}}})})),t("LMarkerCluster",{ref:"markerClusterRef",refInFor:!0,attrs:{options:{disableClusteringAtZoom:13}}},e._l(a.features.marker,(function(s,o){return t("LMarker",{key:"MARKER"+o,attrs:{latLng:s.geometry,options:{id:s.id,name:s.name}},on:{click:function(t){return e.openDrawDialog(s,a)}}},[t("LPopup",{attrs:{content:s.text}}),t("LIcon",{attrs:{iconUrl:s.iconUrl,iconRetinaUrl:s.iconRetinaUrl,iconSize:s.iconSize,iconAnchor:s.iconAnchor,popupAnchor:s.popupAnchor}})],1)})),1),t("LMarkerCluster",{ref:"pointClusterRef",refInFor:!0,attrs:{options:{disableClusteringAtZoom:15}}},e._l(a.features.point,(function(e,a){return t("LCircle",{key:"POINT"+a,attrs:{latLng:e.geometry,color:e.color,fillColor:e.fillColor,fillOpacity:e.fillOpacity,radius:e.radius}})})),1)],2)})),t("LControl",{staticClass:"map-watermark",attrs:{position:"bottomleft"}},[t("img",{staticClass:"logo-watermark",attrs:{src:a("18b2")}})])],2),t("MapMenu",{attrs:{loadFeatures:e.loadFeatures,clearMapData:e.clearMapData,removeLayer:e.removeLayer}}),t("Filters"),e.getMap.loading?e._e():t("Legend"),e.featureInformation.open?t("FeatureInformation",{key:e.featureInformation.open,attrs:{featureInformation:e.featureInformation}}):e._e(),e.popup.open?t("Popup",{attrs:{popup:e.popup,closePopup:e.closePopup}}):e._e(),e.getSelectedLayers().length>1?t("LayerOverlay",{attrs:{loadLayer:e.loadLayer,clearMapData:e.clearMapData}}):e._e(),t("Toolbox",{attrs:{loadFeatures:e.loadFeatures}}),t("TourDialog")],1)])},o=[],i=(a("14d9"),a("b7ef"),a("e11e")),r=a.n(i),n=a("ac00"),l=a("cc2b"),c=a("09247"),d=a.n(c),p=a("ca9f"),u=a("2699"),m=a("a40a"),h=a("c8b6"),g=a("2253"),v=a("9ee8"),y=a("044a"),b=a("258a"),f=a("e464"),_=a("1ebb"),w=a("4e2b"),k=a("fbba"),x=a("0dbd"),O=a("f60f"),$=a("e699"),C=a("c154"),L=a("1b6d"),S=a("1b13"),M=a("fa40"),E=a("93fd"),j=a("d0ac"),T=a("6c3d"),D=function(){var e=this,t=e._self._c;return t("v-col",{attrs:{cols:"auto"}},[t("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"550"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{color:"teal"}},[t("div",{staticClass:"tour-title"},[e._v(e._s(e.$t("system_welcome")))])]),t("v-card-text",[t("div",{staticClass:"subtitle-1 pa-8"},[e._v(" "+e._s(e.$t("system_welcome_text_1"))+" "),t("b",[e._v("Urban Map")]),e._v(", "+e._s(e.$t("system_welcome_text_2"))+" "),t("br"),t("br"),e._v(" "+e._s(e.$t("system_welcome_text_3"))+" "),t("b",[e._v("TOUR")]),e._v(" "+e._s(e.$t("system_welcome_text_4"))+" ")])]),t("v-card-actions",{staticClass:"justify-end"},[t("div",{staticClass:"dialog-actions-button"},[t("v-btn",{staticClass:"button-width",attrs:{color:"red"},on:{click:function(t){e.dialog=!1}}},[e._v(" "+e._s(e.$t("system_welcome_btn_no"))+" ")]),t("v-btn",{staticClass:"button-width",attrs:{color:"green"},on:{click:function(t){return e.startTour()}}},[e._v(" "+e._s(e.$t("system_welcome_btn_yes"))+" ")])],1)])],1)],1)],1)},R=[],I=a("ed08"),P={name:"TourDialog",data(){return{dialog:!1}},mounted(){const e=Object(I["d"])("SHOW_TOUR");e||(this.dialog=!0)},methods:{toggleDialog(){this.dialog=!this.dialog},startTour(){this.toggleDialog(),Object(I["t"])("SHOW_TOUR",!0),setTimeout(()=>{this.$tours["tour"].start()},900)}}},A=P,U=(a("3148"),a("2877")),N=Object(U["a"])(A,D,R,!1,null,null,null),F=N.exports,G=a("2ef0"),z=a("bc3a"),H=a.n(z),q=a("c1df"),B=a.n(q),Y=(a("48ec"),a("fa4b"),{name:"Map",components:{VGeosearch:l["a"],LDrawToolbar:d.a,LMarkerCluster:p,LMap:u["a"],LTileLayer:m["a"],LControlZoom:h["a"],LControl:g["a"],LControlLayers:v["a"],LGeoJson:y["a"],LPolygon:b["a"],LImageOverlay:f["a"],LLayerGroup:_["a"],LMarker:w["a"],LIcon:k["a"],LCircle:x["a"],LPopup:O["a"],LayerOverlay:$["a"],Loading:C["a"],MapMenu:L["a"],FeatureInformation:S["a"],Filters:M["a"],Popup:E["a"],Toolbox:j["a"],Legend:T["a"],TourDialog:F},data(){return{downloadedImagesUrls:{},loading:!0,popup:{open:!1,data:null,tray:!1,charts:[],tabs:[]},dialog:!1,featureInformation:{open:!1,position:null,element:null,data:null},map:{mapRef:"map",zoom:Object(I["n"])(),centerMapCoords:Object(I["l"])(),options:{zoomControl:!1,attributionControl:!1},layerGroups:[],geojsons:[],tileLayers:Object(I["m"])(),geosearchOptions:{provider:new n["a"],autoComplete:!0,autoCompleteDelay:0,autoClose:!0}}}},beforeCreate(){H.a.defaults.headers.common["Authorization"]=localStorage.getItem("crimeradarToken")},mounted(){const e=this.$refs.map.mapObject;window._map=e,window._refs=this.$refs,e.on(r.a.Draw.Event.CREATED,t=>{const a=new r.a.FeatureGroup;e.addLayer(a);let s=t.layerType,o=t.layer,i=o.getLatLng();const{lng:n,lat:l}=i;if("marker"===s){const e=[l,n,0],t=this.$store.getters.featureData,a=Object.assign({},t);a.geometry=e,a.type="MARKER",o.bindPopup(a.popup);const s=this.$store.getters.drawDialog,{feature:i,type:r}=s;"CREATE"===r?this.$store.dispatch("updateFeatureData",a).then(()=>{this.createMarkerFeature(a)}):this.$store.dispatch("updateFeatureData",a).then(()=>{this.editMarkerFeature(a)})}a.addLayer(o)}),setTimeout(()=>{this.loadGeojson().then(()=>this.updateLoading(!1))},500),window._mapFunctions={loadFeatures:this.loadFeatures}},methods:{async loadGeojson(){console.log("Loading geojsons...");const e=Object(I["h"])();Object(G["isEmpty"])(e)||e.map(e=>{let t=`/geojson/${e}.geojson`;var a={method:"GET",redirect:"follow"};fetch(t,a).then(e=>e.json()).then(e=>{let t=e;this.map.geojsons.push({data:t,options:{color:"#c4c4a6","stroke-width":"3","fill-opacity":.5}})}).catch(e=>{console.log(e),H.a.get("geojson/default.geojson").then(e=>{let t=e.data;this.map.geojsons.push({data:t,options:{color:"#c4c4a6","stroke-width":"3","fill-opacity":.5}})})})})},async editMarkerFeature(e){this.updateLoading(!0);const t={open:!0,color:"",text:"sending_data",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",t);let a=Object.assign({},this.$store.getters.drawDialog);const{feature:s,layer:o}=a,{layer_id:i,geometry:r,fields:n}=e,l={geometry:r,fields:n,laguage:this.$i18n.locale};let c=Object(I["b"])("feature/"+s.id);H.a.patch(c,l).then(e=>{const{data:t,errors:s}=e.data;if(!Object(G["isEmpty"])(s))return this.updateLoading(!1),Object(I["g"])(s);a={open:!1,layer:null,feature:null,type:""},this.$store.dispatch("updateDrawDialog",a);let o={layer_id:null,tenant_id:null,feature_collection_id:null,language:"pt",fields:[],properties:{},geometry:null,type:null,popup:null};this.$store.dispatch("updateFeatureData",o);const r={open:!0,color:"",text:"success_edit_interest_point",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",r);const n=this.$store.getters.layers,l=Object.assign([],n);l.map(e=>{e.layers.map(e=>{e.id===i&&(e.selected=!0,e.filters.map(e=>e.key=""))})}),this.$store.dispatch("updateLayers",l),this.updateLoading(!1),this.loadFeatures()}).catch(e=>{console.error(e),this.updateLoading(!1),this.removeMarkerFromMap(s);const t={open:!0,color:"",text:"error_edit_interest_point",timeout:2500,type:"error"};return this.$store.dispatch("updateSnackbar",t),this.$store.dispatch("updateDrawDialog",{...a,open:!0})})},async createMarkerFeature(e){this.updateLoading(!0);const t={open:!0,color:"",text:"sending_data",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",t);let a=Object.assign({},this.$store.getters.drawDialog);const{layer_id:s}=e;let o=Object(I["b"])("feature");H.a.post(o,e).then(e=>{const{data:t,errors:o}=e.data;if(!Object(G["isEmpty"])(o))return this.updateLoading(!1),Object(I["g"])(o);a={open:!1,layer:null,feature:null,type:""},this.$store.dispatch("updateDrawDialog",a);let i={layer_id:null,tenant_id:null,feature_collection_id:null,language:"pt",fields:[],properties:{},geometry:null,type:null,popup:null};this.$store.dispatch("updateFeatureData",i);const r={open:!0,color:"",text:"success_create_interest_point",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",r);const n=this.$store.getters.layers,l=Object.assign([],n);l.map(e=>{e.layers.map(e=>{e.id===s&&(e.selected=!0)})}),this.$store.dispatch("updateLayers",l)}).then(()=>this.loadFeatures()).catch(e=>{console.error(e),this.updateLoading(!1);const t={open:!0,color:"",text:"error_create_interest_point",timeout:2500,type:"error"};return this.$store.dispatch("updateSnackbar",t),this.$store.dispatch("updateDrawDialog",{...a,open:!0})})},getLayerFilters(e){let t=[];return e.filters.map(e=>{e.values.map(a=>t.push(`filter[]=${e.name}|${a}`))}),t.join("&")},async removeMarkerFromMap(e){const t=this.$refs.map.mapObject;t.eachLayer(e=>{e instanceof r.a.Marker&&console.log(e)})},async removeAllMarkers(){const e=this.$refs.map.mapObject;e.eachLayer(t=>{t instanceof r.a.Marker&&e.getBounds().contains(t.getLatLng())&&e.removeLayer(t)})},async removeLayer(e){let t=Object.assign([],this.map.layerGroups);t=t.filter(t=>t.id!==e.id),t.length||(this.$store.dispatch("updateLegend",!1),this.removeAllMarkers()),this.map.layerGroups=t},async clearMapData(){if(this.removeAllMarkers(),this.removePolygonsPattern(),this.$store.dispatch("updateMap",{}),this.$store.dispatch("updateLegend",!1),Object(G["isEmpty"])(this.map.layerGroups)&&!this.loading){const e={open:!0,color:"",text:"no_info_to_remove",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",e)}this.map.layerGroups=[]},async removePolygonsPattern(){try{let e=document.getElementsByTagName("svg")[0];if(!e)return;let t=e.getElementsByTagName("defs");if(!t)return;while(e.childNodes[1])for(let a of t)e.removeChild(a)}catch(e){console.error(e)}},checkLayerRequirements(e,t){let a=!1;const{extra_props:s,style:o}=e;if(o.extra_props){if(o.extra_props.required_filters&&!Object(G["isEmpty"])(o.extra_props.required_filters)){let t=!1;if(e.filters.map(e=>{o.extra_props.required_filters.includes(e.name)&&(Object(G["isEmpty"])(e.values)||(t=!0))}),t)return!1;const s={open:!0,color:"",text:"no_filter_selected",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",s),e.selected=!1,a=!0,console.log("requirement: required filters - "+o.extra_props.required_filters)}if(o.extra_props&&o.extra_props.single_date&&t[0]!==t[1]){const t={open:!0,color:"",text:"no_single_date_selected",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",t),e.selected=!1,a=!0,console.log("requirement: single date - "+o.extra_props.single_date)}}return a},async loadLayer(e,t){return new Promise((a,s)=>{this.updateLoading(!0);const{id:o,selected:i,name:r,editable:n,extra_props:l}=e;if(!i)return;if(t=this.getDates(t),this.checkLayerRequirements(e,t))return setTimeout(()=>{this.updateLoading(!1)},50),s(null);let c=t[0],d=t[1],p=Object(I["b"])(`layer/${o}/feature?`);p+=this.getLayerFilters(e);let u={id_layer:o,dt_start:c,dt_end:d};H.a.get(p,{params:u}).then(t=>{const{data:i,errors:l}=t.data;if(!Object(G["isEmpty"])(l))return this.updateLoading(!1),Object(I["g"])(l);const{features:c,items:d}=i;if(Object(G["isEmpty"])(c)){const e={open:!0,color:"",text:"no_features_founded",timeout:2500,type:"success"};return this.updateLoading(!1),this.$store.dispatch("updateSnackbar",e)}let p={polygon:[],imageOverlay:[],marker:[],point:[]};c.map(async t=>{try{const a=await this.getFeature(t,e);if(Object(G["isEmpty"])(a.fields))return s();"POLYGON"===a.type?p.polygon.push(a):"IMAGE_OVERLAY"===a.type?p.imageOverlay.push(a):"MARKER"===a.type?p.marker.push(a):"POINT"===a.type&&p.point.push(a)}catch(a){return console.error(a),s(null)}});const u=e.style.types.find(e=>e.value);["point","marker"].includes(u.name)&&Object.keys(p).map(e=>{e!==u.name&&(p[e]=[])});let m=0;Object.values(p).map(e=>m+=e.length);const h={id:o,name:r,featuresAmount:m,features:p,visible:!0,type:"overlay",editable:n};e.features=c,e.legend=d,e.layerGroup=p;const g=Object.assign([],this.$store.getters.layers);g.map(t=>{t.layers.map(t=>{t.id===e.id&&(t=e)})}),this.$store.dispatch("updateLayers",g),this.map.layerGroups.push(h);const v=this.map.layerGroups;this.$store.dispatch("updateMap",{layerGroups:v}),this.updateLoading(!1);const y={open:!0,color:"",text:"success_load_features",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",y),this.$store.dispatch("updateLegend",!0),a(!0)}).catch(()=>{const t=Object.assign([],this.$store.getters.layers);t.map(t=>{t.layers.map(t=>{t.id===e.id&&(t.selected=!1)})}),this.$store.dispatch("updateLayers",t),this.updateLoading(!1)})}).catch(e=>console.error(e))},updateLoading(e){const t=this.$store.getters.map;this.$store.dispatch("updateMap",{...t,loading:e})},async loadFeatures(){this.updateLoading(!0),await this.clearMapData();const e=this.$store.getters.layers,t=this.$store.getters.dates,a=Object.assign([],e);let s=t;const o=this.getSelectedLayers();if(Object(G["isEmpty"])(s)||Object(G["isEmpty"])(o)){const e={open:!0,color:"",text:"no_layer_selected",timeout:2500,type:"warning"};return this.$store.dispatch("updateSnackbar",e),void this.updateLoading(!1)}a.map(e=>{e.layers.map(e=>{this.loadLayer(e,s)})})},openDrawDialog(e,t){const{isOnEditableLayer:a,idLayer:s}=e;if(a){let t=null;const a=Object.assign([],this.$store.getters.layers);if(a.map(e=>{e.layers.map(e=>{e.id===s&&(t=e)})}),!t)return;let o=[];t.filters.map(t=>{e.fields.map(e=>{e.field_config_id===t.id&&o.push({...t,key:e.key,value:e.value})})}),t.filters=o;let i=Object.assign({},this.$store.getters.drawDialog);i={open:!0,layer:t,feature:e,type:"EDIT"},this.$store.dispatch("updateDrawDialog",i)}},heatMapColorforValue(e){var t=240*(1-e);return console.log(t),`hsl(${t}, 100%, 50%)`},hslToHex(e){let t=e.substring(e.indexOf("(")+1,e.indexOf(")")).replace(/%/g,""),[a,s,o]=t.split(",");o/=100;const i=s*Math.min(o,1-o)/100,r=e=>{const t=(e+a/30)%12,s=o-i*Math.max(Math.min(t-3,9-t,1),-1);return Math.round(255*s).toString(16).padStart(2,"0")};return`#${r(0)}${r(8)}${r(4)}`},async getFeature(e,t){const{id:s,name:o,properties:i,geometry:r,label:n,style:l,type:c,fields:d}=e;let p=o,u=this.$i18n.locale,m={id:s,name:o,text:p,geometry:r,idLayer:t.id,properties:i,styles:l,isOnEditableLayer:t.editable,fields:d,defaultStyle:l};switch(c){case"POLYGON":{const{color:e,fillColor:a,fillOpacity:s,opacity:o,weight:i}=l;let r=e,n=a;try{const e=t.style.types.find(e=>e.value);"hexagon"===e.name&&(r=e.color,n=e.color,m.styles={...m.styles,color:r,fillColor:n},m.defaultStyle={...m.defaultStyle,color:r,fillColor:n})}catch(h){console.error(h)}let d="",p=this.hslToHex(r);"HORIZONTAL"===t.style.texture.value?d=Object(I["i"])(t,p,"HORIZONTAL"):"VERTICAL"===t.style.texture.value&&(d=Object(I["i"])(t,p,"VERTICAL"));try{const e=document.getElementById(`layer-${t.id}-stripes-${p}`);if("NONE"!==t.style.texture.value&&!e){let e=document.getElementsByTagName("svg")[0],a=document.createElementNS("http://www.w3.org/2000/svg","defs");a.classList.add("layer-"+t.id),a.insertAdjacentHTML("afterbegin",d),e.appendChild(a)}}catch(h){console.log(h)}let u={...m,color:r,fillColor:"NONE"!==t.style.texture.value?`url(#layer-${t.id}-stripes-${p})`:n,fillOpacity:s,opacity:o,type:c||"POLYGON",weight:i};return u.defaultStyle={color:u.color,fillColor:u.fillColor,fillOpacity:u.fillOpacity,opacity:u.opacity,weight:u.weight},u._polygon=u,u}case"IMAGE_OVERLAY":{const{color:e,fillColor:a,fillOpacity:s,opacity:o,weight:i}=l;let n=e,c=a;const p=d.find(e=>null!==e.extra_props);if(Object(G["isEmpty"])(d)||!p||!p.extra_props||!p.extra_props.image){let e=Object(I["f"])();e=e.replace("[width]",350),e=e.replace("[height]",350),e=e.replace("[color]",n),e=e.replace("[opacity]",o);let t=btoa(e),a="data:image/svg+xml;base64,"+t;return{...m,bounds:r,url:a,opacity:o,type:"IMAGE_OVERLAY",interactive:!0,zIndex:9999,imageOverlayType:null}}try{const e=t.style.types.find(e=>e.value);"hexagon"===e.name&&(n=e.color,c=e.color,m.styles={...m.styles,color:n,fillColor:c},m.defaultStyle={...m.defaultStyle,color:n,fillColor:c})}catch(h){console.error(h)}let u="",g=this.hslToHex(n);"HORIZONTAL"===t.style.texture.value?u=Object(I["i"])(t,g,"HORIZONTAL"):"VERTICAL"===t.style.texture.value&&(u=Object(I["i"])(t,g,"VERTICAL"));const{key:v}=p;v.toUpperCase();Object.prototype.hasOwnProperty.call(this.downloadedImagesUrls,v);let y=null;y=await Object(I["j"])(this.downloadedImagesUrls[v],n,o);try{const e=document.getElementById(`layer-${t.id}-stripes-${g}`);if("NONE"!==t.style.texture.value&&!e){let e=y,a=(new DOMParser).parseFromString(e,"image/svg+xml").firstElementChild,s=document.createElementNS("http://www.w3.org/2000/svg","defs");s.classList.add("layer-"+t.id),s.insertAdjacentHTML("afterbegin",u),a.appendChild(s),a.getElementsByTagName("g")[0].setAttribute("fill",`url(#layer-${t.id}-stripes-${g})`),y=a.outerHTML.trim()}}catch(h){console.log(h)}let b=btoa(y),f="data:image/svg+xml;base64,"+b,_={...m,bounds:r,url:f,opacity:o,type:"IMAGE_OVERLAY",interactive:!0,zIndex:9999,imageOverlayType:v};return _}case"MARKER":{const{id:e,image:s}=i,{icon:o}=l;let r="";t.filters.map(e=>{const t=d.find(t=>t.field_config_id===e.id);if(!t)return r+="";let a=e.label&&e.label[u]?e.label[u]:e.name,s="";"image"===e.type?s+=`${a}: <a href='${t.key}' target='_blank'>${t.key}</a> <br />`:s+=`${a}: ${t.key} <br />`,r+=s});let n=a("61b0")(`./${o}.png`);s&&!Object(G["isEmpty"])(s)&&(n=s);let p={...m,type:c||"MARKER",iconUrl:n,iconRetinaUrl:n,iconSize:[32,32],iconAnchor:[16,37],popupAnchor:[0,-30],text:r};return p}case"POINT":{const{color:e,fillColor:t,fillOpacity:a,opacity:s,stroke:o,radius:i}=l;let r={...m,type:c||"POINT",color:e,fillColor:t,fillOpacity:a,radius:3,stroke:!1};return r}default:return}},async getSvgString(e){},onMouseEnterImageOverlay(e,t){const a=e.originalEvent.target,s=a.getBoundingClientRect();this.featureInformation={open:!0,position:s,element:a,data:t}},onMouseLeaveImageOverlay(){this.featureInformation={open:!1,position:null,element:null,data:null}},getDates(e){return 1===e.length&&(e[1]=e[0]),B()(e[0]).isAfter(B()(e[1]))&&(e=[e[1],e[0]]),e},getSelectedLayers(){return Object(I["o"])()},clearHighlightedFeatures(){try{const e=this.$refs.map.mapObject;e.eachLayer(t=>{if(t instanceof r.a.Polygon&&e.getBounds().contains(t.getLatLngs())){const{defaultStyle:e}=t.options;e?t.setStyle({...t.options,color:e.color,fillColor:e.fillColor,opacity:e.opacity,fillOpacity:e.fillOpacity,weight:e.weight}):t.setStyle({...t.options,color:t.options.color,fillColor:t.options.fillColor,opacity:t.options.opacity,fillOpacity:t.options.fillOpacity,weight:t.options.weight})}})}catch(e){console.error(e)}},highlightFeature(e){try{const t=this.$refs.map.mapObject;t.eachLayer(a=>{a instanceof r.a.Polygon&&t.getBounds().contains(a.getLatLngs())&&a.options.id===e.id&&a.setStyle({...a.defaultStyle,weight:3,color:"teal",fillColor:"teal"}),a instanceof r.a.ImageOverlay&&t.getBounds().contains(a.getBounds())&&a.options.id===e.id&&a.setStyle({weight:3,color:"teal",stroke:!0})})}catch(t){console.error(t)}},openPopup(e){this.clearHighlightedFeatures(),this.highlightFeature(e),this.updateLoading(!0);let t=this.$store.getters.dates;t=this.getDates(t);let a=t[0],s=t[1];const{idLayer:o,id:i}=e;let r=Object(I["b"])(`feature/${i}/chart`,{id_layer:o,dt_start:a,dt_end:s});H.a.get(r).then(t=>{const{data:a,errors:s}=t.data;if(!Object(G["isEmpty"])(s))return this.updateLoading(!1),Object(I["g"])(s);const{tabs:o}=a;this.popup={...this.popup,tray:!1,open:!0,data:e,tabs:o},this.updateLoading(!1)}).catch(e=>{console.log(e);const t={open:!0,color:"",text:"error_api",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.updateLoading(!1)});try{const e=document.querySelector(".opacity-95");if(!e)return;const t=document.querySelector(".opacity-95").parentNode,a=document.querySelector(".popup-header");t.style.top="unset",a.style.bottom="unset",a.style.top="0px"}catch(n){console.error(n)}},closePopup(){this.popup={...this.popup,open:!1,data:null,charts:[]},this.clearHighlightedFeatures()}},computed:{getMap(){return this.$store.getters.map}}}),V=Y,W=(a("6d55"),Object(U["a"])(V,s,o,!1,null,null,null));t["a"]=W.exports},e650:function(e,t,a){},f348:function(e,t,a){},fbad:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("v-snackbar",{staticClass:"snackbar",attrs:{timeout:e.snackbar.timeout,color:e.getColorByType(e.snackbar.type),absolute:"",bottom:"",right:""},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({staticClass:"snackbar-button",attrs:{color:e.close_color,text:""},on:{click:function(t){e.snackbar.open=!1}}},"v-btn",a,!1),[e._v(" "+e._s(e.$t("snackbar_close"))+" ")])]}}]),model:{value:e.snackbar.open,callback:function(t){e.$set(e.snackbar,"open",t)},expression:"snackbar.open"}},[e._v(" "+e._s(e.$t(e.snackbar.text))+" ")])},o=[],i=a("abdd"),r={name:"Snackbar",data(){return{close_color:"#FFF"}},mounted(){},methods:{getColorByType(e){return"success"===e?i["a"].SUCCESS:"warning"===e?i["a"].WARNING:i["a"].ERROR}},computed:{snackbar(){return this.$store.getters.snackbar}}},n=r,l=(a("9195"),a("2877")),c=Object(l["a"])(n,s,o,!1,null,null,null);t["a"]=c.exports}}]);