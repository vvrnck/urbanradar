(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~1ad7283e"],{"1a8e":function(e,t,a){"use strict";a("3d1a")},"2af9":function(e,t,a){"use strict";a("d824"),a("1c4d"),a("1b13"),a("ba71"),a("fa40"),a("e8c3"),a("e699"),a("c154"),a("b461"),a("1808"),a("c447"),a("d540"),a("1b6d"),a("93fd");var s=a("fbad");a.d(t,"a",(function(){return s["a"]}));a("0d18"),a("d0ac");var i=a("aa9e");a.d(t,"b",(function(){return i["a"]}))},"3d1a":function(e,t,a){},"459e":function(e,t,a){"use strict";a("58dc")},"58dc":function(e,t,a){},"6c3d":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLegend&&e.getActiveLayers().length,expression:"showLegend && getActiveLayers().length"}],staticClass:"legend",attrs:{id:"legend","data-v-step":"legend"}},[t("v-card",{staticClass:"legend-wrapper"},[t("div",{staticClass:"legend-controller"},[t("div",{staticClass:"legend-controller-title"},[t("span",[e._v(e._s(e.$t("legend")))])]),t("div",{staticClass:"legend-controller-actions"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleLegend()}}},[t("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.legendOpened,expression:"legendOpened"}]},[e._v("mdi-minus")]),t("v-icon",{directives:[{name:"show",rawName:"v-show",value:!e.legendOpened,expression:"!legendOpened"}]},[e._v("mdi-plus")])],1)],1)]),e.legendOpened?t("div",{staticClass:"legend-content"},[t("v-card",{attrs:{elevation:"5",outlined:"",shaped:""}},[t("div",{staticClass:"legend-inner-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.getMap.loading||e.loading,expression:"getMap.loading || loading"}]},e._l(3,(function(e){return t("v-skeleton-loader",{key:e,staticClass:"mx-auto mb-3",attrs:{"max-width":"300",type:"text",loading:""}})})),1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.getMap.loading&&!e.loading,expression:"!getMap.loading && !loading"}]},e._l(e.sections,(function(a,s){return t("div",{key:s},e._l(a.layers,(function(a){return t("div",{key:a.id},[a.selected?t("div",e._l(a.legend,(function(s,i){return t("div",{key:i},[a.legend[i].length&&"polygon"===i?t("div",{staticClass:"legend-item polygon"},["scale"===e.getLayerType(a).name?t("div",[t("div",{staticClass:"legend-layer-name"},[e._v(e._s(`${e.getLabel(a,e.$i18n.locale)} (${a.layerGroup["polygon"].length})`))]),e._l(a.legend["polygon"],(function(s,i){return t("div",{key:i,staticClass:"legend-layer-item"},[t("div",{staticClass:"legend-layer-item-icon",domProps:{innerHTML:e._s(e.getHexagon(a.style.texture.value,s.color))}}),t("div",{staticClass:"legend-layer-item-name"},[e._v(e._s(e.$t(s.name)))])])}))],2):e._e(),"hexagon"===e.getLayerType(a).name?t("div",[t("div",{staticClass:"legend-layer-item"},[t("div",{staticClass:"legend-layer-item-icon",domProps:{innerHTML:e._s(e.getHexagon(a.style.texture.value,e.getLayerType(a).color))}}),t("div",{staticClass:"legend-layer-name"},[e._v(e._s(`${e.getLabel(a,e.$i18n.locale)} (${a.layerGroup["polygon"].length})`))])])]):e._e()]):e._e(),a.legend[i].length&&"image_overlay"===i?t("div",{staticClass:"legend-item image-overlay"},["scale"===e.getLayerType(a).name?t("div",[t("div",{staticClass:"legend-layer-name"},[e._v(e._s(`${e.getLabel(a,e.$i18n.locale)} (${a.layerGroup["imageOverlay"].length})`))]),e._l(a.legend["image_overlay"],(function(a,s){return t("div",{key:s,staticClass:"legend-layer-item"},[t("div",{staticClass:"legend-layer-item-icon",domProps:{innerHTML:e._s(e.getCircle(a.color))}}),t("div",{staticClass:"legend-layer-name"},[e._v(e._s(e.$t(a.name)))])])}))],2):e._e(),"hexagon"===e.getLayerType(a).name?t("div",[t("div",{staticClass:"legend-layer-item"},[t("div",{staticClass:"legend-layer-item-icon",domProps:{innerHTML:e._s(e.getHexagon(a.style.texture.value,e.getLayerType(a).color))}}),t("div",{staticClass:"legend-layer-name"},[e._v(e._s(`${e.getLabel(a,e.$i18n.locale)} (${a.layerGroup["imageOverlay"].length})`))])])]):e._e()]):e._e(),a.legend[i].length&&"marker"===i?t("div",{staticClass:"legend-item marker"},e._l(a.legend["marker"],(function(s,i){return t("div",{key:i,staticClass:"legend-layer-item"},[t("div",{staticClass:"legend-layer-item-marker",domProps:{innerHTML:e._s(e.getIcon(s.icon,s.image))}}),t("div",{staticClass:"legend-layer-name"},[e._v(e._s(`${e.getLabel(a,e.$i18n.locale)} (${a.layerGroup["marker"].length})`))])])})),0):e._e(),a.legend[i].length&&"point"===i?t("div",{staticClass:"legend-item point"},[t("div",{staticClass:"legend-layer-name"},[e._v(e._s(`${e.getLabel(a,e.$i18n.locale)} (${a.layerGroup["point"].length})`))]),e._l(a.legend["point"],(function(a,s){return t("div",{key:s,staticClass:"legend-layer-item"},[t("div",{staticClass:"legend-layer-item-icon",domProps:{innerHTML:e._s(e.getCircle(a.color))}}),t("div",[e._v(e._s(e.$t(a.name)))])])}))],2):e._e()])})),0):e._e()])})),0)})),0)])])],1):e._e()])],1)},i=[],n=(a("14d9"),a("e11e")),l=a.n(n),r=a("ed08"),o=a("2ef0"),c={name:"Legend",data:()=>({legendOpened:!0,loading:!0}),mounted(){this.loading=!0;const e=document.getElementById("legend"),t=new l.a.Draggable(e);t.enable();const a=document.getElementsByClassName("legend-controller")[0];a.addEventListener("mousedown",()=>{a.style.cursor="grabbing"}),a.addEventListener("mouseup",()=>{a.style.cursor="grab"}),setTimeout(()=>{this.loading=!1},600)},methods:{getLabel(e,t){return Object(r["k"])(e,t)},getActiveLayers(){const e=this.$store.getters.layers,t=[];return e.map(e=>{e.layers.map(e=>{e.selected&&t.push(e)})}),t},getLayerType(e){const t=e.style.types.find(e=>e.value);return t||{name:"scale"}},toggleLegend(){this.legendOpened=!this.legendOpened},getIcon(e,t){let s=null;try{s=a("67f7")("./"+e)}catch(i){console.error(i),console.log("ICON NOT FOUND")}return Object(o["isEmpty"])(t)||(s=t),`\n                <img src="${s}" width="15px" height="15px"></img>\n            `},getCircle(e){return`<svg height="20" width="20">\n                        <circle cx="10" cy="10" r="5" stroke="white" stroke-width="1" fill="${e}" />\n                    </svg>`},getHexagon(e,t){const a=this.$vuetify.theme.dark?"#FFFFFF":"#181818",s=this.$vuetify.theme.dark?"#FFFFFF":"#181818";switch(e){case"HORIZONTAL":return`<svg width="20" height="17.5" xmlns="http://www.w3.org/2000/svg">\n                                <g>\n                                    <path stroke="${a}" id="svg_1" d="m7.519513,-0.000008l7.352849,3.958512l0,7.917025l-7.352849,3.958512l-7.352849,-3.958512l0,-7.917025l7.352849,-3.958512z" fill="${t}" opacity="1"></path>\n                                    <rect id="svg_17" height="1.5" width="11" y="2" x="2" fill="${s}"></rect>\n                                    <rect id="svg_14" height="1.5" width="15" y="5" x="0" fill="${s}"></rect>\n                                    <rect id="svg_15" height="1.5" width="15" y="8.3" x="0" fill="${s}"></rect>\n                                    <rect id="svg_16" height="1.5" width="11" y="11.5" x="2" fill="${s}"></rect>\n                                </g>\n                            </svg>`;case"VERTICAL":return`<svg width="20" height="17.5" xmlns="http://www.w3.org/2000/svg">\n                                <g>\n                                    <path stroke=${a}" id="svg_1" d="m7.519513,-0.000008l7.352849,3.958512l0,7.917025l-7.352849,3.958512l-7.352849,-3.958512l0,-7.917025l7.352849,-3.958512z" fill="${t}" opacity="1"></path>\n                                    <rect id="svg_17" height="10.5" width="1.5" y="2.5" x="1.7" fill="${s}"></rect>\n                                    <rect id="svg_14" height="14.5" width="1.5" y="0.5" x="5.1" fill="${s}"></rect>\n                                    <rect id="svg_15" height="14.5" width="1.5" y="0.5" x="8.6" fill="${s}"></rect>\n                                    <rect id="svg_16" height="10.5" width="1.5" y="2.5" x="12" fill="${s}"></rect>\n                                </g>\n                            </svg>`;default:return`<svg width="20" height="17.5" xmlns="http://www.w3.org/2000/svg">\n                                <g>\n                                    <path stroke="${a}" id="svg_1" d="m7.519513,-0.000008l7.352849,3.958512l0,7.917025l-7.352849,3.958512l-7.352849,-3.958512l0,-7.917025l7.352849,-3.958512z" fill="${t}" opacity="1"></path>\n                                </g>\n                            </svg>`}}},computed:{showLegend(){return this.$store.getters.legend},sections(){return this.$store.getters.layers},getMap(){return this.$store.getters.map}}},d=c,u=(a("459e"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,null,null);t["a"]=p.exports},8331:function(e,t,a){},"9a72":function(e,t,a){"use strict";a("cc4b")},a17e:function(e,t,a){"use strict";(function(e){a("14d9");var s=a("e11e"),i=a.n(s),n=a("bc3a"),l=a.n(n),r=(a("48ec"),a("2ef0")),o=a("ed08"),c=a("be44"),d=a("0d18"),u=a("c154");t["a"]={name:"Layers",props:["loadFeatures","clearMapData","removeLayer"],components:{ColorPicker:c["a"],Timeline:d["a"],Loading:u["a"]},data(){return{timeline:!1,layerRectOptions:null,file:null,reader:null,loading:!1}},mounted(){},methods:{async editMarkerFeature(e){this.updateLoading(!0);const t={open:!0,color:"",text:"sending_data",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",t);let a=Object.assign({},this.$store.getters.drawDialog);const{feature:s,layer:i}=a,{layer_id:n,geometry:c,fields:d}=e,u={geometry:c,fields:d,laguage:this.$i18n.locale};let p=Object(o["b"])("feature/"+s.id);l.a.patch(p,u).then(e=>{const{data:t,errors:s}=e.data;if(!Object(r["isEmpty"])(s))return this.updateLoading(!1),Object(o["g"])(s);a={open:!1,layer:null,feature:null,type:""},this.$store.dispatch("updateDrawDialog",a);let i={layer_id:null,tenant_id:null,feature_collection_id:null,language:"pt",fields:[],properties:{},geometry:null,type:null,popup:null};this.$store.dispatch("updateFeatureData",i);const l={open:!0,color:"",text:"success_edit_interest_point",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",l);const c=this.$store.getters.layers,d=Object.assign([],c);d.map(e=>{e.layers.map(e=>{e.id===n&&(e.selected=!0,e.filters.map(e=>e.key=""))})}),this.$store.dispatch("updateLayers",d),this.updateLoading(!1),this.loadFeatures()}).catch(e=>{console.error(e),this.updateLoading(!1);const t={open:!0,color:"",text:"error_edit_interest_point",timeout:2500,type:"error"};return this.$store.dispatch("updateSnackbar",t),this.$store.dispatch("updateDrawDialog",{...a,open:!0})})},getFile(e){if(!this.file){var t=new File([""],e.key);this.file=t}return this.file},async getFileURL(t){if(console.log(t),this.loading=!0,!this.reader||!this.file){this.loading=!1;const e={open:!0,color:"",text:"warning_send_file",timeout:2500,type:"warning"};return this.$store.dispatch("updateSnackbar",e)}if(!this.reader)return this.loading=!1;const{name:a,data:s}=this.reader;new e(s.replace(/^data:image\/\w+;base64,/,""),"base64")},onChangeFile(e){if(!e)return;const t=new FileReader;t.readAsDataURL(e),t.addEventListener("load",()=>{this.reader={name:e.name,data:t.result}})},getColorStyle(e){return this.$vuetify.theme.dark?e.selected?"color: #52FFEE":"color: #FFFFFF":e.selected?"color: teal":"color: #181818"},closeTimeline(){this.timeline=!1},getLabel(e,t){return Object(o["k"])(e,t)},getField(e){let t={label:{en:"--",pt:"--"},key:"--"},a=this.$store.getters.drawDialog;const{feature:s}=a,i=s.fields.find(t=>t.field_config_id===e.id);return i?(s.fields.map(a=>{if(a.field_config_id===e.id){let s=a.key;e.key=s,t={...a,key:s,label:e.label}}}),t):t},openTimeline(){this.timeline=open},changeLayerTexture(e){},resetLayerType(e){const t=Object.assign([],this.$store.getters.layers);t.map(t=>{t.layers.map(t=>{t.id===e.id&&t.style.types.map((t,a)=>{t.value=!1,0===a&&(t.value=!0);const s=document.querySelector(".layer-menu-options-"+e.id),i=this.layerRectOptions.top;s.style.top=i+"px"})})}),this.$store.dispatch("updateLayers",t)},resetLayerTexture(e){const t=Object.assign([],this.$store.getters.layers);t.map(t=>{t.layers.map(t=>{t.id===e.id&&(t.style.texture.value="NONE")})}),this.$store.dispatch("updateLayers",t)},changeLayerType(e,t){const a=Object.assign([],this.$store.getters.layers);a.map(a=>{a.layers.map(a=>{a.id===e.id&&a.style.types.map(a=>{if(a.value=!1,a.name===t.name){const t=160,s=document.querySelector(".layer-menu-options-"+e.id),i=this.layerRectOptions.top;"hexagon"===a.name?this.layerRectOptions.top+this.layerRectOptions.y+t>=window.screen.height&&(s.style.top=i-t+"px"):s.style.top=i+"px",a.value=!0}})})}),this.$store.dispatch("updateLayers",a)},async removeFeatureFromMap(e){const t=window._map;t.eachLayer(a=>{a instanceof i.a.Marker&&t.getBounds().contains(a.getLatLng())&&a.options.id===e&&t.removeLayer(a)})},deleteMarker(){this.loading=!0;const e={open:!0,color:"",text:"removing_data",timeout:2500,type:"warning"};this.$store.dispatch("updateSnackbar",e);let t=Object.assign({},this.$store.getters.drawDialog);const{feature:{id:a}}=t;let s=Object(o["b"])("feature/"+a);l.a.delete(s).then(e=>{const{data:s,errors:i}=e.data;if(!Object(r["isEmpty"])(i))return this.loading=!1,Object(o["g"])(i);this.removeFeatureFromMap(a);const n=window._refs;n.markerClusterRef[0].mapObject.refreshClusters(),t={open:!1,layer:null,feature:null,type:""},this.$store.dispatch("updateDrawDialog",t);const l={open:!0,color:"",text:"success_delete_interest_point",timeout:2500,type:"success"};this.$store.dispatch("updateSnackbar",l),this.loading=!1,this.loadFeatures()}).catch(e=>{console.log(e);const t={open:!0,color:"",text:"error_delete_interest_point",timeout:2500,type:"error"};this.$store.dispatch("updateSnackbar",t),this.loading=!1})},editPoint(){const e=this.$store.getters.drawDialog,{layer:t,feature:a}=e,s=Object.assign({},t),{id:i,filters:n,style:l}=s;let r=this.$i18n.locale,o=!0;if(n.map(e=>{e.key&&""!==e.key||"image"===e.type||(o=!1)}),!o){const e={open:!0,color:"",text:"warning_fill_fields",timeout:2500,type:"warning"};return this.$store.dispatch("updateSnackbar",e)}let c=Object.assign({},this.$store.getters.drawDialog);this.$store.dispatch("updateDrawDialog",{...c,open:!1});const{extra_props:d}=l;let u={};d&&d.marker&&Object.keys(d.marker).map(e=>u[e]=d.marker[e]);let p="",g=[];n.map(e=>{const{id:t,name:a,key:s}=e;g.push({key:s,value:"1",field_config_id:t});let i=e.label&&e.label[r]?e.label[r]:e.name,n="";"image"===e.type?n+=`${i}: <a href='${s}' target='_blank'>${s}</a> <br />`:n+=`${i}: ${s} <br />`,p+=n});let v=Object.assign({},this.$store.getters.featureData),m=JSON.parse(sessionStorage.getItem("featureCollections"))[0];v={...v,layer_id:i,tenant_id:"1",feature_collection_id:m.id,language:this.$i18n.locale,fields:g,properties:u,popup:p,geometry:a.geometry,type:a.type},this.$store.dispatch("updateFeatureData",v),this.editMarkerFeature(v)},drawPointInMap(){const{layer:e}=this.drawDialog,t=Object.assign({},e),{id:s,filters:n,style:l}=t;let o=this.$i18n.locale,c=!0,d=!0;if(n.map(e=>{e.key&&""!==e.key||"image"===e.type||(c=!1)}),!d){const e={open:!0,color:"",text:"warning_upload_file",timeout:2500,type:"warning"};return this.$store.dispatch("updateSnackbar",e)}if(!c){const e={open:!0,color:"",text:"warning_fill_fields",timeout:2500,type:"warning"};return this.$store.dispatch("updateSnackbar",e)}let u=Object.assign({},this.$store.getters.drawDialog);this.$store.dispatch("updateDrawDialog",{...u,open:!1});const{extra_props:p}=l;let g={};p&&p.marker&&Object.keys(p.marker).map(e=>g[e]=p.marker[e]);let v="",m=[];n.map(e=>{const{id:t,name:a,key:s}=e;m.push({key:s,value:"1",field_config_id:t});let i=e.label&&e.label[o]?e.label[o]:e.name,n="";"image"===e.type?n+=`${i}: <a href='${s}' target='_blank'>${s}</a> <br />`:n+=`${i}: ${s} <br />`,v+=n});let y=a("078f");Object(r["isEmpty"])(g)||(Object(r["isEmpty"])(g.icon)&&""===g.icon.trim()||(y=a("67f7")("./"+g.icon)),Object(r["isEmpty"])(g.image)&&""===g.image.trim()||(y=g.image));const h=window._map;var f=new i.a.Draw.Marker(h,{icon:i.a.icon({iconRetinaUrl:y,iconUrl:y,iconSize:[32,32],iconAnchor:[16,37],popupAnchor:[0,-30]})});f.enable();let _=Object.assign({},this.$store.getters.featureData),b=JSON.parse(sessionStorage.getItem("featureCollections"))[0];_={..._,layer_id:s,tenant_id:"1",feature_collection_id:b.id,language:this.$i18n.locale,fields:m,properties:g,popup:v},this.$store.dispatch("updateFeatureData",_)},openDrawDialog(e){this.file=null,e.filters.map(e=>e.key="");const t=Object.assign({},this.$store.getters.drawDialog);this.$store.dispatch("updateDrawDialog",{...t,open:!0,layer:e,type:"CREATE",feature:null})},closeDrawDialog(){let e=Object.assign({},this.$store.getters.drawDialog);e={open:!1,layer:null,feature:null,type:""},this.$store.dispatch("updateDrawDialog",e)},searchLayer(e){const t=Object.assign([],this.$store.getters.layers);t.map(t=>{t.layers.map(t=>{t.id===e.id&&(t.selected=!0)})}),this.$store.dispatch("updateLayers",t),this.loadFeatures();const a=document.querySelector(".layer-menu-options-"+e.id);if(a){const t=document.querySelector(`.options-${e.id}-button`);t.click()}const s=document.querySelector(".layer-menu-filter-"+e.id);if(s){const t=document.querySelector(`.filter-${e.id}-button`);t.click()}},selectFilterItem(e,t){const a=Object.assign([],this.$store.getters.layers);a.map(e=>{e.layers.map(e=>{e.filters.map(e=>{e.items.map(a=>{a.id===t.id&&(a.selected?(a.selected=!1,e.values=e.values.filter(e=>e!==t.text)):(a.selected=!0,e.values.push(a.text)))})})})}),this.$store.dispatch("updateLayers",a),e.stopPropagation()},uncheckFilterItem(e,t){const a=Object.assign([],this.$store.getters.layers);a.map(e=>{e.layers.map(e=>{e.filters.map(e=>{e.items.map(a=>{a.id===t.id&&a.selected&&(a.selected=!1,e.values=e.values.filter(e=>e!==t.text))})})})}),this.$store.dispatch("updateLayers",a),e.stopPropagation()},resetFilter(e,t){t.items.map(e=>e.selected=!1),e.stopPropagation()},changeFilterStyle(){setTimeout(()=>{const e=document.querySelector(".map-menu");var t=e.getBoundingClientRect();const a=getComputedStyle(e),s=t.left,i=parseInt(a.width),n=document.getElementsByClassName("layer-menu-item-filter");for(let l=0;l<n.length;l++){const e=n[l].parentNode;e.style.left=s+i+"px"}},200)},changeOptionsStyle(e){setTimeout(()=>{const t=document.querySelector(".map-menu"),a=t.getBoundingClientRect(),s=getComputedStyle(t),i=a.left,n=parseInt(s.width),l=document.querySelector(".layer-menu-options-"+e.id);this.layerRectOptions=l.getBoundingClientRect();const r=document.getElementsByClassName("layer-menu-item-options");for(let e=0;e<r.length;e++){const t=r[e].parentNode;t.style.left=i+n+"px"}},200)},getSelectedLayers(){const e=this.$store.getters.layers,t=Object.assign([],e),a=[];return t.map(e=>{e.layers.map(e=>{e.selected&&a.push(e)})}),a},updateLoading(e){const t=this.$store.getters.map;this.$store.dispatch("updateMap",{...t,loading:e})},toggleSelectedLayer(e){const t=this.menuItems,a=Object.assign([],t);a.map(t=>{t.layers.map(t=>{if(t.id===e.id){if(t.selected=!t.selected,t.selected)return this.updateLoading(!0),this.$store.dispatch("updateLayers",a).then(()=>{this.$store.dispatch("updateSelectedLayers",this.getSelectedLayers())}),this.loadFeatures();if(!t.selected)return this.$store.dispatch("updateLayers",a).then(()=>{this.$store.dispatch("updateSelectedLayers",this.getSelectedLayers())}),this.removeLayer(t)}})})},hasActiveLayers(e){let t=!1;return e.map(e=>{e.active&&(t=!0)}),t}},computed:{menuItems(){return this.$store.getters.layers},drawDialog(){return this.$store.getters.drawDialog},getMap(){return this.$store.getters.map}}}}).call(this,a("b639").Buffer)},b461:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-page"},[t("v-flex",{staticClass:"login-form-wrapper",attrs:{"d-flex":"","justify-center":"","align-center":""}},[t("div",{staticClass:"login-form"},[t("v-form",[t("div",{staticClass:"form-header"},[t("img",{attrs:{src:a("e347"),alt:"CrimeRadar"}}),e.loading?t("Loading",{attrs:{color:"#52FFEE",type:"linear"}}):e._e()],1),t("div",{staticClass:"form-body"},[t("div",{staticClass:"form-fields"},e._l(e.inputs,(function(a){return t("div",{key:a.name},[t("v-text-field",{attrs:{name:a.name,type:a.type,color:a.color,counter:a.counter,rules:a.rules,required:a.required,label:""+e.$t(a.label),"append-icon":a.appendIcon.hasIcon?a.appendIcon.iconOn:a.appendIcon.iconOff,autocomplete:"off"},on:{"click:append":()=>{a.appendIcon.hasIcon=!a.appendIcon.hasIcon,a.type="text"===a.type?"password":"text"},keydown:function(t){if(!t.type.indexOf("key")&&13!==t.keyCode)return null;"password"===a.name&&e.login()}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"input.value"}})],1)})),0),t("div",{staticClass:"form-actions"},[t("div",{staticClass:"form-actions-links"},[t("div",{on:{click:function(t){return e.forgotPassword()}}},[e._v(" "+e._s(e.$t("forgot_password"))+" ")])]),t("v-btn",{attrs:{block:"",disabled:e.loading},on:{click:function(t){return e.login()}}},[e.loading?t("div",[e.loading?t("Loading",{attrs:{color:"#FFF",type:"circular"}}):e._e()],1):e._e(),e.loading?e._e():t("div",[e._v(" "+e._s(e.$t("btn_login"))+" ")])])],1)]),t("div",{staticClass:"form-footer"},[t("div",{staticClass:"system-version"},[e._v(" "+e._s(e.getVersion)+" ")])])])],1)]),t("div",{staticClass:"change-language"},e._l(e.languages,(function(a,s){return t("div",{key:a.type},[t("div",{staticClass:"language"},[t("div",{staticClass:"language-item",on:{click:function(t){return e.changeLanguage(a.language)}}},[e._v(e._s(a.label))]),0===s?t("div",{staticClass:"bullet"},[e._v("●")]):e._e()])])})),0)],1)},i=[],n=(a("14d9"),a("260b")),l=(a("ea7b"),a("bc3a")),r=a.n(l),o=a("ed08"),c=a("2ef0"),d=a("fbad"),u=a("c154"),p={name:"LoginPage",components:{Snackbar:d["a"],Loading:u["a"]},data(){return{loading:!1,inputs:[{name:"email",label:"email",type:"text",color:"#FFF",required:!0,value:"",appendIcon:{hasIcon:!1,iconOn:"",iconOff:""},counter:50,rules:[e=>!!e||this.getMessage("REQUIRED_EMAIL"),e=>/.+@.+\..+/.test(e)||this.getMessage("VALID_EMAIL")]},{name:"password",label:"password",type:"password",color:"#FFF",required:!0,show:!1,value:"",counter:20,appendIcon:{hasIcon:!0,iconOn:"mdi-eye",iconOff:"mdi-eye-off"}}],languages:[{name:"portuguese",label:"Português (Brasil)",type:"pt-BR",language:"pt"},{name:"english",label:"English",type:"en-US",language:"en"}]}},methods:{forgotPassword(){this.loading=!0;const e=this.inputs[0];if(""===e.value){this.loading=!1;const e={open:!0,color:"",text:"no_email_provided",timeout:2500,type:"warning"};return this.$store.dispatch("updateSnackbar",e)}n["a"].auth().sendPasswordResetEmail(e.value).then(()=>{this.loading=!1;const e={open:!0,color:"",text:"success_reset_password",timeout:2500,type:"success"};return this.$store.dispatch("updateSnackbar",e)}).catch(e=>{this.loading=!1;const t={open:!0,color:"",text:"error_reset_password",timeout:2500,type:"error"};return this.$store.dispatch("updateSnackbar",t)})},changeLanguage(e){this.$i18n.locale=e},getMessage(e){switch(e){case"REQUIRED_EMAIL":return"en"===this.$i18n.locale?"Email address is mandatory":"O email é obrigatório";case"VALID_EMAIL":return"en"===this.$i18n.locale?"It must be a valid email address":"Deve ser um email válido";default:return""}},login(){this.loading=!0;const e=this.inputs[0].value,t=this.inputs[1].value;n["a"].auth().signInWithEmailAndPassword(e,t).then(async e=>{if(e.error)return this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_firebase",timeout:2500,type:"error"});const{user:t}=e,a=await t.getIdToken();let s=Object(o["b"])("auth/token");const i={email:t.email,access_token:a,tenant_id:"1"};r.a.post(s,i).then(e=>{const{data:t,errors:a}=e.data,{active:s,tenants:i,email:n,token:l}=t;if(!Object(c["isEmpty"])(a))return this.loading=!1,Object(o["g"])(a);if(Object(c["isEmpty"])(t))return this.loading=!1,this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_user_not_found",timeout:2500,type:"error"});r.a.defaults.headers.common["Authorization"]=l.access_token;const d=i.find(e=>"1"==e);if(!d)return this.loading=!1,this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_user_without_permission",timeout:2500,type:"error"});if(!s)return this.loading=!1,this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_user_not_active",timeout:2500,type:"error"});{let e=Object(o["b"])("auth/tenant/1/token");r.a.post(e).then(e=>{const{data:{email:t,name:a,roles:s,token:{scope:n,access_token:l,feature_collections:r,tenant_id:o}}}=e.data;localStorage.setItem("crimeradarToken",l),sessionStorage.setItem("featureCollections",JSON.stringify(r)),sessionStorage.setItem("tenantId",o),sessionStorage.setItem("user",JSON.stringify({name:a,roles:s,scope:n,tenants:i,email:t})),this.loading=!1,this.$router.push({name:"map"}).catch(e=>console.log(e))}).catch(e=>(console.log(e),this.loading=!1,this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_api",timeout:2500,type:"error"})))}}).catch(e=>(this.loading=!1,this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_api",timeout:2500,type:"error"})))}).catch(e=>(this.loading=!1,this.$store.dispatch("updateSnackbar",{open:!0,color:"",text:"error_firebase",timeout:2500,type:"error"})))}},computed:{getVersion:()=>{const e="3.0";return"v."+e}}},g=p,v=(a("9a72"),a("2877")),m=Object(v["a"])(g,s,i,!1,null,null,null);t["a"]=m.exports},be70:function(e,t,a){},c154:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",["linear"===e.type?t("div",[t("v-progress-linear",{attrs:{indeterminate:"",color:e.color}})],1):e._e(),"circular"===e.type?t("div",[t("v-progress-circular",{attrs:{size:20,width:3,color:e.color,indeterminate:""}})],1):e._e()])},i=[],n={name:"Loading",props:["color","type"]},l=n,r=a("2877"),o=Object(r["a"])(l,s,i,!1,null,null,null);t["a"]=o.exports},cc4b:function(e,t,a){},de28:function(e,t,a){"use strict";a("be70")},e699:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("v-navigation-drawer",{staticStyle:{transition:"all 0.7s ease-in-out 0s","z-index":"9999",opacity:"0.9"},attrs:{absolute:"",temporary:"",right:""},model:{value:e.layerOverlay,callback:function(t){e.layerOverlay=t},expression:"layerOverlay"}},[t("draggable",{on:{end:function(t){return e.reloadLayers()}},model:{value:e.selectedLayers,callback:function(t){e.selectedLayers=t},expression:"selectedLayers"}},[t("transition-group",e._l(e.selectedLayers,(function(a){return t("div",{key:a.id,staticClass:"card-list"},[t("v-card",{staticClass:"card-item",attrs:{outlined:"",elevation:"5"}},[t("v-icon",[e._v("mdi-drag-horizontal")]),t("span",[e._v(e._s(e.getLabel(a,e.$i18n.locale)))])],1)],1)})),0)],1)],1)},i=[],n=a("b76a"),l=a.n(n),r=a("ed08"),o={name:"LayerOverlay",props:["loadLayer","clearMapData"],components:{draggable:l.a},methods:{getLabel(e,t){return Object(r["k"])(e,t)},reloadLayers(){this.clearMapData().then(async()=>{const e=this.$store.getters.dates;for(let t=0;t<this.selectedLayers.length;t++){const a=this.selectedLayers[t];await this.loadLayer(a,e)}}).then(()=>{this.$store.dispatch("updateLayerOverlay",!1)})}},computed:{selectedLayers:{get(){return this.$store.getters.selectedLayers},set(e){this.$store.dispatch("updateSelectedLayers",e)}},layerOverlay:{get(){return this.$store.getters.layerOverlay},set(e){this.$store.dispatch("updateLayerOverlay",e)}}}},c=o,d=(a("f2cc"),a("2877")),u=Object(d["a"])(c,s,i,!1,null,null,null);t["a"]=u.exports},e882:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"layers"},[e._l(e.menuItems,(function(a,s){return t("div",{key:s},[a.layers&&e.hasActiveLayers(a.layers)?t("div",{staticClass:"layers-menu-items"},[t("div",{staticClass:"section"},[t("div",{staticClass:"section-header"},[t("v-icon",[e._v(e._s(a.icon))]),t("span",[e._v(e._s(e.getLabel(a,e.$i18n.locale)))])],1),e._l(a.layers,(function(a,s){return t("div",{directives:[{name:"show",rawName:"v-show",value:a.active,expression:"layer.active"}],key:s,staticClass:"layer-menu-item"},[t("div",{style:e.getMap.loading?"":e.getColorStyle(a)},[e._v(e._s(e.getLabel(a,e.$i18n.locale)))]),t("div",{staticClass:"layer-menu-item-actions"},[t("v-menu",{attrs:{bottom:"",right:"","offset-x":!0,"content-class":"layer-menu-options-"+a.id},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("v-btn",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:a.configurable,expression:"layer.configurable"}],class:`options-${a.id}-button`,attrs:{icon:"",color:a.selected?"#52FFEE":"#FFFFFF",disabled:e.getMap.loading},on:{click:function(t){return e.changeOptionsStyle(a)}}},"v-btn",i,!1),s),[t("v-icon",[e._v("mdi-cog")])],1)]}}],null,!0)},[a.style?t("v-sheet",{staticClass:"layer-menu-item-options",on:{click:e=>e.stopPropagation()}},[t("v-card",{staticClass:"layer-menu-item-options-content",attrs:{elevation:"2",outlined:"",shaped:""}},[t("div",{staticClass:"layer-type"},[t("div",{staticClass:"options-header"},[t("span",[e._v(e._s(e.$t("type")))]),t("div",{staticClass:"options-header-actions"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.resetLayerType(a)}}},[t("v-icon",[e._v(" mdi-rotate-left ")])],1),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.searchLayer(a)}}},[t("v-icon",[e._v(" mdi-arrow-right-bold-circle-outline ")])],1)],1)]),t("v-card",{staticClass:"options-wrapper",attrs:{elevation:"2",outlined:"",shaped:""}},[t("div",{staticClass:"options-types"},e._l(a.style.types,(function(s){return t("div",{key:s.name},[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:n}){return[t("v-btn",e._g(e._b({attrs:{icon:""},on:{click:function(t){return e.changeLayerType(a,s)}}},"v-btn",n,!1),i),[t("v-icon",{attrs:{color:s.value?"#52FFEE":""}},[e._v(e._s(s.icon))])],1)]}}],null,!0)},[t("span",[e._v(" "+e._s(e.$t(s.label))+" ")])])],1)})),0),t("div",{staticClass:"options-scale"},e._l(a.style.types,(function(s){return t("div",{directives:[{name:"show",rawName:"v-show",value:"hexagon"===s.name&&!0===s.value,expression:"type.name === 'hexagon' && type.value === true"}],key:s.name,staticClass:"color-picker"},["hexagon"===s.name&&!0===s.value?t("ColorPicker",{attrs:{type:s,colorScale:a.style.colorScale.polygon,layer:a}}):e._e()],1)})),0)])],1),t("div",{staticClass:"texture"},[t("div",{staticClass:"options-header"},[t("span",[e._v(e._s(e.$t("texture")))]),t("div",{staticClass:"options-header-actions"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.resetLayerTexture(a)}}},[t("v-icon",[e._v(" mdi-rotate-left ")])],1),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.searchLayer(a)}}},[t("v-icon",[e._v(" mdi-arrow-right-bold-circle-outline ")])],1)],1)]),t("v-card",{staticClass:"options-wrapper",attrs:{elevation:"2",outlined:"",shaped:""}},[t("div",{staticClass:"options-textures"},[t("v-radio-group",{attrs:{row:""},on:{change:function(t){return e.changeLayerTexture(a)}},model:{value:a.style.texture.value,callback:function(t){e.$set(a.style.texture,"value",t)},expression:"layer.style.texture.value"}},e._l(a.style.texture.options,(function(a){return t("v-radio",{key:a,attrs:{color:"#52FFEE",value:a},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{class:"box-color texture-"+a})]},proxy:!0}],null,!0)})})),1)],1)])],1)])],1):e._e()],1),a.editable?t("v-btn",{attrs:{icon:"",color:a.selected?"#52FFEE":"#FFFFFF",disabled:e.getMap.loading},on:{click:function(t){return e.openDrawDialog(a)}}},[t("v-icon",[e._v("mdi-plus")])],1):e._e(),t("v-menu",{attrs:{bottom:"",right:"","offset-x":!0,"content-class":"layer-menu-filter-"+a.id},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("v-btn",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:a.filters.length,expression:"layer.filters.length"}],class:`filter-${a.id}-button`,attrs:{icon:"",color:a.selected?"#52FFEE":"#FFFFFF",disabled:e.getMap.loading},on:{click:function(t){return e.changeFilterStyle()}}},"v-btn",i,!1),s),[t("v-icon",[e._v("mdi-filter")])],1)]}}],null,!0)},[t("v-sheet",{staticClass:"layer-menu-item-filter",on:{click:e=>e.stopPropagation()}},[t("v-card",{staticClass:"layer-menu-item-filter-content",attrs:{elevation:"2",outlined:"",shaped:""}},e._l(a.filters,(function(s,i){return t("div",{key:i},[t("div",{staticClass:"filter-header"},[t("span",[e._v(e._s(e.getLabel(s,e.$i18n.locale)))]),t("div",{staticClass:"filter-header-actions"},[t("v-btn",{attrs:{icon:""},on:{click:t=>e.resetFilter(t,s)}},[t("v-icon",[e._v(" mdi-rotate-left ")])],1),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.searchLayer(a)}}},[t("v-icon",[e._v(" mdi-arrow-right-bold-circle-outline ")])],1)],1)]),t("v-card",{staticClass:"filters-wrapper",attrs:{elevation:"2",outlined:"",shaped:""}},e._l(s.items,(function(a){return t("v-chip",{key:a.id,staticClass:"ma-2",attrs:{close:!!a.selected,small:"",color:a.selected?"teal":"gray"},on:{click:t=>e.selectFilterItem(t,a),"click:close":t=>e.uncheckFilterItem(t,a)}},[t("v-avatar",{attrs:{left:""}},[t("v-icon",[e._v(e._s(a.selected?"mdi-checkbox-marked-circle":"mdi-alert-circle-outline"))])],1),e._v(" "+e._s(e.getLabel(a,e.$i18n.locale))+" ")],1)})),1)],1)})),0)],1)],1),t("v-btn",{attrs:{icon:"",color:a.selected?"#52FFEE":"#FFFFFF",disabled:e.getMap.loading},on:{click:()=>e.toggleSelectedLayer(a)}},[t("v-icon",[e._v(e._s(a.selected?"mdi-eye":"mdi-eye-off"))])],1)],1)])}))],2)]):e._e()])})),e.drawDialog.open?t("v-dialog",{attrs:{width:"500"},on:{"click:outside":function(t){return e.closeDrawDialog()}},model:{value:e.drawDialog.open,callback:function(t){e.$set(e.drawDialog,"open",t)},expression:"drawDialog.open"}},[t("v-card",{staticClass:"dialog-card",attrs:{outlined:"",shaped:""}},[t("v-toolbar",{attrs:{color:"teal"}},[t("div",{staticClass:"headline"},[e._v(e._s(e.getLabel(e.drawDialog.layer,e.$i18n.locale)))]),t("v-spacer"),t("v-btn",{attrs:{icon:""},on:{click:function(t){return e.closeDrawDialog()}}},[t("v-icon",[e._v("mdi-close")])],1)],1),e.loading||e.getMap.loading?t("Loading",{attrs:{color:"primary",type:"linear"}}):e._e(),t("v-divider"),t("div",{staticClass:"dialog-card-content"},["CREATE"===e.drawDialog.type?t("div",e._l(e.drawDialog.layer.filters,(function(a){return t("div",{key:a.id,staticClass:"layer-fields"},[a.visible?t("div",{staticClass:"field-item"},[["text","password","number"].includes(a.type)?t("div",[t("v-text-field",{attrs:{name:a.name,label:e.getLabel(a,e.$i18n.locale),type:a.type,outlined:"",dense:"",autocomplete:"off"},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"field.key"}})],1):e._e(),"textarea"===a.type?t("div",[t("v-textarea",{attrs:{label:e.getLabel(a,e.$i18n.locale),solo:"",name:a.name,"no-resize":"",outlined:"",autocomplete:"off"},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"field.key"}})],1):e._e(),"boolean"===a.type?t("div",[t("v-switch",{attrs:{label:e.getLabel(a,e.$i18n.locale)},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"field.key"}})],1):e._e(),"date"===a.type?t("div",[t("v-date-picker",{attrs:{range:""},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"field.key"}})],1):e._e(),"image"===a.type?t("div",[t("v-row",{staticClass:"align-center"},[t("v-col",{attrs:{cols:"10"}},[t("v-file-input",{attrs:{"truncate-length":100,label:e.getLabel(a,e.$i18n.locale)},on:{change:t=>e.onChangeFile(t)},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),t("v-col",{attrs:{cols:"2"}},[t("v-btn",{staticClass:"mx-auto",attrs:{fab:"",small:"",color:"teal",disabled:e.loading||e.getMap.loading},on:{click:function(t){return e.getFileURL(a)}}},[e.loading?t("v-progress-circular",{attrs:{indeterminate:"",color:"teal"}}):t("v-icon",[e._v("mdi-upload")])],1)],1)],1)],1):e._e()]):e._e()])})),0):e._e(),"EDIT"===e.drawDialog.type?t("div",e._l(e.drawDialog.layer.filters,(function(a){return t("div",{key:a.id,staticClass:"layer-fields"},[a.visible?t("div",{staticClass:"field-item"},[["text","password","number"].includes(a.type)?t("div",[t("v-text-field",{attrs:{name:a.name,label:e.getLabel(a,e.$i18n.locale),type:a.type,value:a.key,outlined:"",dense:"",autocomplete:"off"},on:{change:e=>a.key=e}})],1):e._e(),"textarea"===a.type?t("div",[t("v-textarea",{attrs:{label:e.getLabel(a,e.$i18n.locale),value:a.key,solo:"",name:a.name,"no-resize":"",outlined:"",autocomplete:"off"},on:{change:e=>a.key=e}})],1):e._e(),"boolean"===a.type?t("div",[t("v-switch",{attrs:{value:a.key,label:e.getLabel(a,e.$i18n.locale)},on:{change:e=>a.key=e}})],1):e._e(),"date"===a.type?t("div",[t("v-date-picker",{attrs:{value:a.key,range:""},on:{change:e=>a.key=e}})],1):e._e(),"image"===a.type?t("div",[t("v-row",{staticClass:"align-center"},[t("v-col",{attrs:{cols:"10"}},[t("v-file-input",{attrs:{"truncate-length":100,label:e.getLabel(a,e.$i18n.locale),value:e.getFile(a)},on:{change:t=>e.onChangeFile(t)}})],1),t("v-col",{attrs:{cols:"2"}},[t("v-btn",{staticClass:"mx-auto",attrs:{fab:"",small:"",color:"teal",disabled:e.loading||e.getMap.loading},on:{click:function(t){return e.getFileURL(a)}}},[e.loading?t("v-progress-circular",{attrs:{indeterminate:"",color:"teal"}}):t("v-icon",[e._v("mdi-upload")])],1)],1)],1)],1):e._e()]):e._e()])})),0):e._e()]),t("v-divider"),t("v-card-actions",{staticClass:"pa-3 dialog-action-buttons"},[t("div",{staticClass:"timeline"},[e.drawDialog.feature&&"EDIT"===e.drawDialog.type?t("v-btn",{staticClass:"mx-2",attrs:{fab:"",small:"",color:"teal",ripple:"",disabled:e.loading||e.getMap.loading},on:{click:function(t){return e.openTimeline()}}},[t("v-icon",[e._v("mdi-timer")])],1):e._e()],1),t("div",{staticClass:"actions"},[e.drawDialog.feature&&"EDIT"===e.drawDialog.type?t("v-btn",{attrs:{color:"red",filled:"",ripple:"",width:"110",small:"",disabled:e.loading||e.getMap.loading},on:{click:function(t){return e.deleteMarker()}}},[e._v(" "+e._s(e.$t("dialog_btn_delete"))+" ")]):e._e(),"CREATE"===e.drawDialog.type?t("v-btn",{attrs:{color:"green",filled:"",ripple:"",width:"110",small:"",disabled:e.loading||e.getMap.loading},on:{click:function(t){return e.drawPointInMap()}}},[e._v(" "+e._s(e.$t("dialog_btn_draw"))+" ")]):e._e(),"EDIT"===e.drawDialog.type?t("v-btn",{attrs:{color:"green",filled:"",ripple:"",width:"110",small:"",disabled:e.loading||e.getMap.loading},on:{click:function(t){return e.editPoint()}}},[e._v(" "+e._s(e.$t("dialog_btn_edit"))+" ")]):e._e(),"EDIT"===e.drawDialog.type?t("v-btn",{staticClass:"mx-2",attrs:{fab:"",small:"",color:"primary",ripple:""},on:{click:function(t){return e.drawPointInMap()}}},[t("v-icon",[e._v(" mdi-map-marker ")])],1):e._e()],1)])],1)],1):e._e(),e.timeline?t("Timeline",{attrs:{timeline:e.timeline,closeTimeline:e.closeTimeline}}):e._e()],2)},i=[],n=a("a17e"),l=n["a"],r=(a("de28"),a("2877")),o=Object(r["a"])(l,s,i,!1,null,null,null);t["a"]=o.exports},e8c3:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.layer.show?t("v-slide-x-transition",[t("v-sheet",{staticClass:"inner-menu-options"},[t("div",{staticClass:"inner-menu-title"},[e._v(" "+e._s(e.getLabel(e.layer,e.$i18n.locale))+" "),t("v-btn",{attrs:{icon:"",fab:"",small:"",outlined:""},on:{click:function(t){return e.close()}}},[t("v-icon",[e._v("mdi-arrow-left")])],1)],1),t("v-divider"),t("div",{staticClass:"inner-menu-items"},[t("v-list",{staticClass:"inner-menu-items-list",attrs:{dense:"",expand:""}},e._l(e.layer.options,(function(a,s){return t("v-list-group",{key:s,staticClass:"inner-menu-item",attrs:{"prepend-icon":"mdi-layers",color:"#52FFEE"},scopedSlots:e._u([{key:"activator",fn:function(){return[t("v-list-item-title",[e._v(e._s(a.name))])]},proxy:!0}],null,!0),model:{value:a.open,callback:function(t){e.$set(a,"open",t)},expression:"l.open"}},[s<e.layer.options.length-1?t("v-divider",{key:s}):e._e(),t("v-card",{attrs:{flat:""}},[t("div",{staticClass:"inner-menu-layer-options"},[t("div",{staticClass:"switches"},e._l(a.style.types,(function(s){return t("v-switch",{key:s.name,attrs:{color:"#52FFEE",dense:""},on:{change:function(t){return e.onChangeType(a,s)}},nativeOn:{click:function(e){e.stopPropagation()}},scopedSlots:e._u([{key:"label",fn:function(){return[t("p",{staticStyle:{"font-size":"14px",display:"contents"}},[e._v(e._s(e.$t(""+s.name)))])]},proxy:!0}],null,!0),model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"type.value"}})})),1),e._l(a.style.types,(function(s){return t("div",{directives:[{name:"show",rawName:"v-show",value:"hexagon"===s.name&&!0===s.value,expression:"type.name === 'hexagon' && type.value === true"}],key:s.name,staticClass:"color-picker"},["hexagon"===s.name&&!0===s.value?t("ColorPicker",{attrs:{type:s,colorScale:a.style.colorScale.polygon}}):e._e()],1)})),a?t("div",{staticClass:"date"},[e._v(" "+e._s(e.$t("date"))+" "),t("v-dialog",{ref:"dates",refInFor:!0,attrs:{"return-value":e.dateToText(e.dates).dates,persistent:"","retain-focus":!1,width:"290px"},on:{"update:returnValue":function(t){e.$set(e.dateToText(e.dates),"dates",t)},"update:return-value":function(t){e.$set(e.dateToText(e.dates),"dates",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-text-field",e._g(e._b({attrs:{label:"Date period","prepend-icon":"mdi-calendar",readonly:"",color:"#52FFEE"},model:{value:e.dateToText(e.dates).dates,callback:function(t){e.$set(e.dateToText(e.dates),"dates",t)},expression:"dateToText(dates).dates"}},"v-text-field",s,!1),a))]}}],null,!0),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[t("v-date-picker",{attrs:{range:"","header-color":"secondary",scrollable:"",locale:"pt-br",color:"#52FFEE","event-color":"#52FFEE"},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}},[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:function(t){e.modal=!1}}},[e._v(" Cancel ")]),t("v-btn",{attrs:{text:""},on:{click:()=>e.onChangeDate(e.dates)}},[e._v(" OK ")])],1)],1)],1):e._e(),a.style.texture?t("div",[e._v(" "+e._s(e.$t("texture"))+" "),t("div",{staticClass:"textures"},[t("v-radio-group",{attrs:{row:""},on:{change:function(t){return e.onChangeTexture(a)}},model:{value:a.style.texture.value,callback:function(t){e.$set(a.style.texture,"value",t)},expression:"l.style.texture.value"}},e._l(a.style.texture.options,(function(a){return t("v-radio",{key:a,attrs:{color:"#52FFEE",value:a},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{class:"box-color texture-"+a})]},proxy:!0}],null,!0)})})),1)],1)]):e._e(),a.filters?t("div",[e._v(" "+e._s(e.$t("filters"))+" "),t("div",{staticClass:"filters"},e._l(a.filters,(function(a){return t("div",{key:a.id,staticClass:"filter"},[t("span",{staticClass:"filter-title"},[e._v(e._s(e.getLabel(a,e.$i18n.locale)))]),t("vue-tags-input",{attrs:{tags:a.tags,"autocomplete-items":e.filteredItems(a.items,a.value),placeholder:e.getFilterName(),"autocomplete-min-length":0,"avoid-adding-duplicates":!1,"add-only-from-autocomplete":!0},on:{"tags-changed":e=>a.tags=e},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"filter.value"}})],1)})),0)]):e._e()],2)])],1)})),1)],1)],1)],1):e._e()},i=[],n=(a("2ef0"),a("ed08")),l=a("c7a0"),r=a.n(l),o=a("be44"),c={name:"LayerMenu",props:["layer","close"],components:{VueTagsInput:r.a,ColorPicker:o["a"]},data(){return{modal:!1,textures:["NONE","HORIZONTAL","VERTICAL"]}},methods:{getLabel(e,t){return Object(n["k"])(e,t)},getFilterName(){return"Add Filter"},onChangeDate(e){1==e.length&&(e[1]=e[0]),this.$refs.dates[0].save()},onChangeTexture(e){},onChangeType(e,t){const a=Object.assign([],this.$store.getters.layers);a.map(a=>{a.layers.map(a=>{a.id===e.id&&a.style.types.map(e=>{e.value=!1,e.name===t.name&&(e.value=!0,a.selected=!a.selected)})})}),this.$store.dispatch("updateLayers",a)},onChangeFilter(e,t){e.tags=t},dateToText(e){const t={dates:null};return t.dates=e.join(" ~ "),t},filteredItems(e,t){return t.length>0&&(e=e.filter(e=>{if(""!==t)return e.text.toLowerCase().includes(t.toLowerCase())})),e}},computed:{menu(){return this.$store.getters.menu},availableDates(){return this.$store.getters.availableDates},dates:{get(){return this.$store.getters.dates},set(e){this.$store.dispatch("updateDates",e)}}}},d=c,u=(a("1a8e"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,null,null);t["a"]=p.exports},f2cc:function(e,t,a){"use strict";a("8331")}}]);